# services/sre-assistant/.env.example
# 
# 環境變數範本檔案
# 複製此檔案為 .env 並填入實際的值
#

# ========================================
# 基本設定
# ========================================
ENVIRONMENT=development
LOG_LEVEL=INFO
DEBUG=true

# ========================================
# 服務設定
# ========================================
HOST=0.0.0.0
PORT=8000
WORKERS=1

# ========================================
# 資料庫連接
# ========================================
# PostgreSQL (應用資料庫)
DATABASE_URL=postgresql://postgres:postgres@postgres:5432/sre_assistant
DATABASE_POOL_SIZE=10
DATABASE_POOL_RECYCLE=3600

# Redis (快取與會話)
REDIS_URL=redis://redis:6379
REDIS_TTL=3600
REDIS_MAX_CONNECTIONS=50

# ChromaDB (向量資料庫)
CHROMA_HOST=chromadb
CHROMA_PORT=8001
CHROMA_COLLECTION=sre_knowledge

# ========================================
# 認證設定 (Keycloak)
# ========================================
# JWT 驗證
KEYCLOAK_JWKS_URL=http://keycloak:8080/realms/sre-platform/protocol/openid-connect/certs
JWT_ALGORITHM=RS256
JWT_ISSUER=http://keycloak:8080/realms/sre-platform
OAUTH_CLIENT_ID=sre-assistant

# M2M 認證 (用於回調 Control Plane)
CONTROL_PLANE_CLIENT_ID=sre-assistant
CONTROL_PLANE_CLIENT_SECRET=your-client-secret-here
KEYCLOAK_TOKEN_ENDPOINT=http://keycloak:8080/realms/sre-platform/protocol/openid-connect/token

# ========================================
# 外部服務 API
# ========================================
# Control Plane
CONTROL_PLANE_URL=http://control-plane:8081/api
CONTROL_PLANE_TIMEOUT=10

# Prometheus
PROMETHEUS_URL=http://prometheus:9090
PROMETHEUS_TIMEOUT=15
PROMETHEUS_STEP=1m
PROMETHEUS_MAX_POINTS=1000

# Loki
LOKI_URL=http://loki:3100
LOKI_TIMEOUT=20
LOKI_LIMIT=1000
LOKI_MAX_TIME_RANGE=24h

# Grafana
GRAFANA_URL=http://grafana:3000
GRAFANA_API_KEY=your-grafana-api-key
GRAFANA_TIMEOUT=10

# VictoriaMetrics
VICTORIA_METRICS_URL=http://victoriametrics:8428
VICTORIA_METRICS_TIMEOUT=15

# ========================================
# AI/ML 設定 (可選)
# ========================================
# Google Gemini
GOOGLE_API_KEY=your-gemini-api-key
GEMINI_MODEL=gemini-1.5-pro
GEMINI_TEMPERATURE=0.7
GEMINI_MAX_TOKENS=2048

# OpenAI (替代選項)
OPENAI_API_KEY=your-openai-api-key
OPENAI_MODEL=gpt-4
OPENAI_TEMPERATURE=0.7
OPENAI_MAX_TOKENS=2048

# ========================================
# 工作流程設定
# ========================================
WORKFLOW_PARALLEL_DIAGNOSIS=true
WORKFLOW_DIAGNOSIS_TIMEOUT=60
WORKFLOW_MAX_RETRIES=3
WORKFLOW_RETRY_DELAY=5

# ========================================
# 功能開關
# ========================================
FEATURE_AUTO_REMEDIATION=false
FEATURE_AI_ANALYSIS=true
FEATURE_CAPACITY_PREDICTION=true
FEATURE_ROOT_CAUSE_ANALYSIS=true

# ========================================
# 監控與追蹤
# ========================================
# Prometheus 指標
METRICS_ENABLED=true
METRICS_PORT=9090

# OpenTelemetry (可選)
OTEL_ENABLED=false
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317
OTEL_SERVICE_NAME=sre-assistant
OTEL_TRACES_EXPORTER=otlp
OTEL_METRICS_EXPORTER=otlp

# ========================================
# 安全設定
# ========================================
# CORS
CORS_ORIGINS=["http://localhost:8081", "http://control-plane:8081", "http://localhost:3000"]
CORS_ALLOW_CREDENTIALS=true

# 速率限制
RATE_LIMIT_ENABLED=false
RATE_LIMIT_PER_MINUTE=60

# API 金鑰 (備用認證方式)
API_KEY_ENABLED=false
API_KEY_HEADER=X-API-Key
API_KEYS_FILE=/secrets/api-keys.json

# ========================================
# 開發設定
# ========================================
# 熱重載
RELOAD=true

# SQL Echo (顯示 SQL 查詢)
SQL_ECHO=false

# 假資料產生
MOCK_DATA=false

# 測試模式
TEST_MODE=false