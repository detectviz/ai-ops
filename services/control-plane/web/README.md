# SRE Platform Frontend (Go/HTMX SSR)

SRE å¹³å°çš„å‰ç«¯æ‡‰ç”¨ç¨‹å¼ï¼Œæ¡ç”¨ä¼ºæœå™¨ç«¯æ¸²æŸ“ (Server-Side Rendering) æ¶æ§‹ï¼Œæä¾›ç¾ä»£åŒ–çš„ç”¨æˆ¶ç•Œé¢ä¾†ç®¡ç†è³‡æºã€ç›£æ§ç³»çµ±å¥åº·ç‹€æ…‹å’ŒåŸ·è¡Œè¨ºæ–·ä»»å‹™ã€‚

## ğŸš€ æŠ€è¡“æ£§

- **å¾Œç«¯æ¡†æ¶**: Go
- **å‰ç«¯äº’å‹•**: HTMX
- **å®¢æˆ¶ç«¯è…³æœ¬**: Alpine.js
- **æ¨£å¼**: Tailwind CSS
- **æ¨¡æ¿å¼•æ“**: Go `html/template`

## ğŸ—ï¸ å°ˆæ¡ˆçµæ§‹

å‰ç«¯ç›¸é—œçš„æ‰€æœ‰æª”æ¡ˆéƒ½ä½æ–¼ `services/control-plane/web/` ç›®éŒ„ä¸‹ã€‚

```
web/
â”œâ”€â”€ static/            # éœæ…‹è³‡æº (CSS, JS, åœ–ç‰‡)
â”‚   â””â”€â”€ css/
â”‚       â””â”€â”€ app.css
â”œâ”€â”€ templates/         # Go HTML æ¨¡æ¿
â”‚   â”œâ”€â”€ layouts/       # é é¢ä½ˆå±€
â”‚   â”‚   â”œâ”€â”€ app.html   # ä¸»è¦æ‡‰ç”¨ç¨‹å¼ä½ˆå±€
â”‚   â”‚   â””â”€â”€ auth.html  # ç™»å…¥é ä½ˆå±€
â”‚   â”œâ”€â”€ pages/         # å…·é«”é é¢
â”‚   â”‚   â”œâ”€â”€ dashboard.html
â”‚   â”‚   â”œâ”€â”€ resources.html
â”‚   â”‚   â””â”€â”€ incidents.html
â”‚   â”œâ”€â”€ partials/      # å¯ç”± HTMX å‹•æ…‹è¼‰å…¥çš„ HTML ç‰‡æ®µ
â”‚   â”‚   â”œâ”€â”€ resource-table.html
â”‚   â”‚   â””â”€â”€ incident-list.html
â”‚   â””â”€â”€ components/    # å¯é‡ç”¨çš„ UI çµ„ä»¶æ¨¡æ¿
â”‚       â””â”€â”€ modal.html
â””â”€â”€ README.md          # æœ¬æ–‡ä»¶
```

## ğŸ”§ é–‹ç™¼å·¥ä½œæµç¨‹

æœ¬å°ˆæ¡ˆçš„å‰ç«¯æ˜¯èˆ‡ Go å¾Œç«¯ç·Šå¯†æ•´åˆçš„ SSR æ‡‰ç”¨ï¼Œä¸ä½œç‚ºç¨ç«‹çš„ Node.js å°ˆæ¡ˆé‹è¡Œã€‚

### ç’°å¢ƒéœ€æ±‚

- Go 1.21+
- `make` å·¥å…·

### å¿«é€Ÿé–‹å§‹

æ‰€æœ‰æŒ‡ä»¤éƒ½æ‡‰åœ¨ **å°ˆæ¡ˆæ ¹ç›®éŒ„** åŸ·è¡Œã€‚

1.  **å®‰è£ä¾è³´èˆ‡è¨­å®šç’°å¢ƒ**
    ```bash
    # æ­¤æŒ‡ä»¤æœƒå®‰è£æ‰€æœ‰å¿…è¦çš„ Go å’Œ Python ä¾è³´
    make setup-dev
    ```

2.  **å•Ÿå‹•ä¾è³´æœå‹™**
    ```bash
    # å•Ÿå‹• PostgreSQL, Redis ç­‰èƒŒæ™¯æœå‹™
    make start-services
    ```

3.  **é‹è¡Œ Control Plane ä¼ºæœå™¨**
    ```bash
    # é€²å…¥ Control Plane ç›®éŒ„
    cd services/control-plane

    # å•Ÿå‹•ä¼ºæœå™¨
    go run ./cmd/server/main.go
    ```
    æ‡‰ç”¨ç¨‹å¼å°‡åœ¨ `http://localhost:8081` å•Ÿå‹•ã€‚

### æ¸¬è©¦

```bash
# åœ¨å°ˆæ¡ˆæ ¹ç›®éŒ„åŸ·è¡Œ
# æ­¤å‘½ä»¤æœƒåŸ·è¡Œæ‰€æœ‰ Control Plane ç›¸é—œçš„ Go æ¸¬è©¦
make test-go
```

## ğŸ§© æ¶æ§‹èªªæ˜

### ä¼ºæœå™¨ç«¯æ¸²æŸ“ (SSR)

æ‰€æœ‰ HTML é é¢éƒ½åœ¨ Go å¾Œç«¯é€²è¡Œæ¸²æŸ“ã€‚å‰ç«¯çš„å‹•æ…‹äº’å‹•ä¸»è¦ç”± HTMX é©…å‹•ï¼Œå®ƒé€éå‘ä¼ºæœå™¨è«‹æ±‚ HTML ç‰‡æ®µä¾†æ›´æ–°é é¢ï¼Œè€Œä¸æ˜¯è«‹æ±‚ JSON æ•¸æ“šã€‚

### HTMX äº’å‹•æ¨¡å¼

- **é é¢è¼‰å…¥**: ç”± Go handler æ¸²æŸ“å®Œæ•´çš„é é¢æ¨¡æ¿ (ä¾‹å¦‚ `pages/dashboard.html`)ã€‚
- **å‹•æ…‹å…§å®¹**: é é¢ä¸­çš„ç‰¹å®šå€åŸŸ (ä¾‹å¦‚ä¸€å€‹è¡¨æ ¼) ä½¿ç”¨ `hx-get` å±¬æ€§åœ¨è¼‰å…¥æ™‚æˆ–ç”±ä½¿ç”¨è€…è§¸ç™¼æ™‚ï¼Œå‘å¾Œç«¯ `/htmx/...` ç«¯é»è«‹æ±‚å…§å®¹ã€‚
- **å¾Œç«¯å›æ‡‰**: `/htmx` ç«¯é»çš„ Go handler åªæ¸²æŸ“å°æ‡‰çš„ HTML ç‰‡æ®µ (partial)ï¼Œä¾‹å¦‚ `partials/resource-table.html`ï¼Œä¸¦å°‡å…¶å›å‚³ã€‚
- **å‰ç«¯æ›´æ–°**: HTMX æ¥æ”¶åˆ° HTML ç‰‡æ®µå¾Œï¼Œæ ¹æ“š `hx-target` å’Œ `hx-swap` å±¬æ€§å°‡å…¶æ’å…¥åˆ°é é¢çš„æ­£ç¢ºä½ç½®ã€‚

### ç‹€æ…‹ç®¡ç†

- **ä¼ºæœå™¨ç‹€æ…‹**: ç”±å¾Œç«¯è³‡æ–™åº«å’Œæœå‹™å±¤ç®¡ç†ã€‚
- **å®¢æˆ¶ç«¯ UI ç‹€æ…‹**: è¼•é‡ç´šçš„ UI ç‹€æ…‹ (ä¾‹å¦‚æ¨¡æ…‹æ¡†çš„é–‹é—œ) ç”± Alpine.js è™•ç†ã€‚

## ğŸ¤ è²¢ç»æŒ‡å—

1.  **åˆ†æ”¯**: å¾ `main` åˆ†æ”¯å‰µå»ºæ–°çš„åŠŸèƒ½åˆ†æ”¯ (`feature/your-feature-name`)ã€‚
2.  **é–‹ç™¼**:
    - åœ¨ `web/templates/` ä¸­å»ºç«‹æˆ–ä¿®æ”¹ HTML æ¨¡æ¿ã€‚
    - åœ¨ `services/control-plane/internal/handlers/` ä¸­æ–°å¢æˆ–ä¿®æ”¹å°æ‡‰çš„ Go è™•ç†å™¨ã€‚
    - åœ¨ `services/control-plane/cmd/server/main.go` ä¸­è¨»å†Šæ–°çš„è·¯ç”±ã€‚
3.  **æ¸¬è©¦**: ç¢ºä¿ `make test-go` èƒ½å¤ æˆåŠŸåŸ·è¡Œã€‚
4.  **æäº¤**: ä½¿ç”¨ã€Œç´„å®šå¼æäº¤ã€æ ¼å¼ (`feat(control-plane): ...`) æäº¤æ›´æ”¹ã€‚
5.  **Pull Request**: ç™¼èµ· PR åˆ° `main` åˆ†æ”¯ã€‚

## ğŸ“ é–‹ç™¼å‚™è¨»

- **API å¥‘ç´„**: æ‰€æœ‰å¾Œç«¯ API å‘¼å«éƒ½æ‡‰éµå¾ª `pkg/api/control-plane-openapi.yaml` çš„è¦ç¯„ã€‚HTMX è™•ç†å™¨æ˜¯ UI å±¤çš„ä¸€éƒ¨åˆ†ï¼Œä½†å…¶èª¿ç”¨çš„æœå‹™æ‡‰èˆ‡ OpenAPI å°é½Šã€‚
- **ç¨‹å¼ç¢¼é¢¨æ ¼**: éµå¾ªæ¨™æº–çš„ Go ç¨‹å¼ç¢¼é¢¨æ ¼ã€‚
- **è¨»è§£**: æ‰€æœ‰æ–°çš„ Go ç¨‹å¼ç¢¼å’Œ HTML æ¨¡æ¿éƒ½æ‡‰åŒ…å«ç¹é«”ä¸­æ–‡è¨»è§£ã€‚

---

## ğŸ“Š ä¸»è¦é é¢/çµ„ä»¶å¯¦ä½œç‹€æ…‹

*æ¯æ¬¡å®Œæˆæ–°çµ„ä»¶ï¼Œè«‹è¨˜å¾—æ›´æ–°æ­¤æ–‡ä»¶ã€‚*

- âœ… **App**: ä¸»æ‡‰ç”¨ç¨‹å¼ä½ˆå±€ (`templates/layouts/app.html`)
- âœ… **Dashboard**: å„€è¡¨æ¿é é¢ (`templates/pages/dashboard.html`)
- âœ… **Resources**: è³‡æºç®¡ç†é é¢ (`templates/pages/resources.html`)
- âœ… **Incidents (å‘Šè­¦ç´€éŒ„)**: äº‹ä»¶/å‘Šè­¦ç´€éŒ„é é¢ (`templates/pages/incidents.html`)
- âŒ **Groups (è³‡æºç¾¤çµ„)**: å°šæœªå¯¦ä½œ
- âŒ **Teams (åœ˜éšŠç®¡ç†)**: å°šæœªå¯¦ä½œ
- âŒ **Rules (å‘Šè­¦è¦å‰‡)**: å°šæœªå¯¦ä½œ
- âŒ **Personnel (äººå“¡ç®¡ç†)**: å°šæœªå¯¦ä½œ
- âŒ **Channels (é€šçŸ¥ç®¡é“)**: å°šæœªå¯¦ä½œ
- âŒ **Automation (è‡ªå‹•åŒ–)**: å°šæœªå¯¦ä½œ
- âŒ **Capacity (å®¹é‡è¦åŠƒ)**: å°šæœªå¯¦ä½œ
- âŒ **Maintenance (ç¶­è­·æ™‚æ®µ)**: å°šæœªå¯¦ä½œ
- âŒ **Settings (ç³»çµ±è¨­å®š)**: å°šæœªå¯¦ä½œ
- âŒ **Profile (å€‹äººè³‡æ–™)**: å°šæœªå¯¦ä½œ
- âŒ **NotificationManager (é€šçŸ¥ç®¡ç†å™¨)**: å°šæœªå¯¦ä½œ
