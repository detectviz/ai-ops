{{define "components/modal.html"}}
{{/*
  檔案路徑: services/control-plane/web/templates/components/modal.html
  說明: 一個可重用的模態框 (Modal) 組件。
         使用 Alpine.js 來控制顯示/隱藏的狀態。

  使用方式:
  - hx-get 一個包含此模態框的 partial。
  - partial 的頂層元素應為 <div x-data="modal()">
  - 模態框的內容應被放置在 `modal-body` block 中。
*/}}
<div x-data="{ open: true }"
     @keydown.escape.window="open = false"
     x-show="open"
     class="fixed inset-0 z-50 overflow-y-auto"
     aria-labelledby="modal-title"
     role="dialog"
     aria-modal="true">

    {{/* <!-- 模態框背景遮罩 --> */}}
    <div x-show="open"
         x-transition:enter="ease-out duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="ease-in duration-200"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>

    {{/* <!-- 模態框主要內容 --> */}}
    <div class="flex items-center justify-center min-h-screen p-4">
        <div x-show="open"
             x-transition:enter="ease-out duration-300"
             x-transition:enter-start="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
             x-transition:enter-end="opacity-100 translate-y-0 sm:scale-100"
             x-transition:leave="ease-in duration-200"
             x-transition:leave-start="opacity-100 translate-y-0 sm:scale-100"
             x-transition:leave-end="opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
             @click.away="open = false"
             class="relative bg-white rounded-lg shadow-xl transform transition-all sm:my-8 sm:max-w-lg sm:w-full">

            {{/* <!-- 模態框頭部 --> */}}
            <div class="flex items-center justify-between p-4 border-b rounded-t">
                <h3 class="text-xl font-semibold text-gray-900" id="modal-title">
                    {{template "modal-title" .}}
                </h3>
                <button @click="open = false" type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center">
                    <i data-lucide="x" class="w-5 h-5"></i>
                    <span class="sr-only">關閉模態框</span>
                </button>
            </div>

            {{/* <!-- 模態框主體 (表單等內容) --> */}}
            <div class="p-6 space-y-6">
                {{template "modal-body" .}}
            </div>

            {{/* <!-- 模態框腳部 (按鈕等) --> */}}
            <div class="flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b">
                {{template "modal-footer" .}}
            </div>
        </div>
    </div>
</div>
{{end}}
