openapi: 3.0.3
info:
  title: SRE Platform - Control Plane API
  description: |
    The Control Plane is the central management hub for the SRE Platform. It provides the Web UI and APIs for managing resources, users, incidents, and more. It orchestrates diagnostic tasks by calling the SRE Assistant service.
  contact:
    name: SRE Platform Team
    email: sre-platform@example.com
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0
  version: 1.0.0
servers:
- url: http://localhost:8081
  description: Control Plane Development Server
- url: https://api.sre-platform.example.com
  description: Production Server (Control Plane entry point)
tags:
- name: Core
  description: 核心系統功能
- name: Dashboard
  description: 儀表板與統計
- name: Resources
  description: 資源管理
- name: Resource Groups
  description: 資源群組管理
- name: Incidents
  description: 事件管理
- name: Alert Rules
  description: 告警規則
- name: Automation
  description: 自動化腳本
- name: Users
  description: 使用者管理
- name: Teams
  description: 團隊管理
- name: Notifications
  description: 通知管道
- name: Settings
  description: 系統設定
- name: Audit
  description: 審計日誌
- name: Callbacks
  description: Endpoints for receiving callbacks from other services (like SRE Assistant)
paths:
  /api/v1/healthz:
    get:
      tags:
      - Core
      summary: 服務健康檢查
      description: 檢查服務是否存活
      operationId: cp_checkHealth
      responses:
        "200":
          description: 服務健康
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/HealthStatus"
  /api/v1/readyz:
    get:
      tags:
      - Core
      summary: 服務就緒檢查
      description: 檢查服務及其依賴是否就緒
      operationId: cp_checkReadiness
      responses:
        "200":
          description: 服務就緒
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ReadinessStatus"
        "503":
          description: 服務未就緒
  /api/v1/metrics:
    get:
      tags:
      - Core
      summary: Prometheus 指標
      description: 獲取 Prometheus 格式的系統指標
      operationId: cp_getMetrics
      responses:
        "200":
          description: Prometheus 指標
          content:
            text/plain:
              schema:
                type: string
                x-content-type: text/plain
  /api/v1/dashboard/summary:
    get:
      tags:
      - Dashboard
      summary: 儀表板摘要
      description: 獲取儀表板的摘要數據
      operationId: getDashboardSummary
      responses:
        "200":
          description: 儀表板摘要
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DashboardSummary"
      security:
      - bearerAuth: []
  /api/v1/dashboard/trends:
    get:
      tags:
      - Dashboard
      summary: 趨勢數據
      description: 獲取各項指標的趨勢數據
      operationId: getDashboardTrends
      parameters:
      - name: period
        in: query
        description: 時間範圍
        required: false
        style: form
        explode: true
        schema:
          type: string
          default: 24h
          enum:
          - 1h
          - 6h
          - 24h
          - 7d
          - 30d
      responses:
        "200":
          description: 趨勢數據
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TrendData"
      security:
      - bearerAuth: []
  /api/v1/dashboard/resource-distribution:
    get:
      tags:
      - Dashboard
      summary: 資源分佈
      description: 獲取資源狀態分佈統計
      operationId: getResourceDistribution
      responses:
        "200":
          description: 資源分佈數據
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResourceDistribution"
      security:
      - bearerAuth: []
  /api/v1/resources:
    get:
      tags:
      - Resources
      summary: 獲取資源列表
      description: 獲取所有資源的列表，支援分頁和過濾
      operationId: listResources
      parameters:
      - name: page
        in: query
        description: 頁碼（從 1 開始）
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          default: 1
      - name: page_size
        in: query
        description: 每頁筆數
        required: false
        style: form
        explode: true
        schema:
          maximum: 100
          minimum: 1
          type: integer
          default: 20
      - name: status
        in: query
        description: 資源狀態過濾
        required: false
        style: form
        explode: true
        schema:
          type: string
          enum:
          - healthy
          - warning
          - critical
          - unknown
      - name: type
        in: query
        description: 資源類型過濾
        required: false
        style: form
        explode: true
        schema:
          type: string
          enum:
          - server
          - network
          - database
          - application
          - container
      - name: group_id
        in: query
        description: 群組 ID 過濾
        required: false
        style: form
        explode: true
        schema:
          type: string
      - name: search
        in: query
        description: 搜尋關鍵字
        required: false
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: 資源列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResourceList"
      security:
      - bearerAuth: []
    post:
      tags:
      - Resources
      summary: 創建資源
      description: 創建新的資源
      operationId: createResource
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ResourceCreateRequest"
        required: true
      responses:
        "201":
          description: 資源創建成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Resource"
        "400":
          description: 請求參數錯誤
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /api/v1/resources/{resourceId}:
    get:
      tags:
      - Resources
      summary: 獲取資源詳情
      description: 獲取特定資源的詳細資訊
      operationId: getResource
      parameters:
      - name: resourceId
        in: path
        description: 資源 ID
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: 資源詳情
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Resource"
        "404":
          description: 資源不存在
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
    put:
      tags:
      - Resources
      summary: 更新資源
      description: 更新資源資訊
      operationId: updateResource
      parameters:
      - name: resourceId
        in: path
        description: 資源 ID
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ResourceUpdateRequest"
        required: true
      responses:
        "200":
          description: 資源更新成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Resource"
      security:
      - bearerAuth: []
    delete:
      tags:
      - Resources
      summary: 刪除資源
      description: 刪除資源
      operationId: deleteResource
      parameters:
      - name: resourceId
        in: path
        description: 資源 ID
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "204":
          description: 資源刪除成功
        "404":
          description: 資源不存在
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
      security:
      - bearerAuth: []
  /api/v1/resources/batch:
    post:
      tags:
      - Resources
      summary: 批次操作資源
      description: 對多個資源執行批次操作
      operationId: batchOperateResources
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/BatchResourceOperation"
        required: true
      responses:
        "200":
          description: 批次操作結果
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BatchOperationResult"
      security:
      - bearerAuth: []
  /api/v1/resources/scan:
    post:
      tags:
      - Resources
      summary: 掃描網段
      description: 掃描指定網段發現新資源
      operationId: scanNetwork
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NetworkScanRequest"
        required: true
      responses:
        "202":
          description: 掃描任務已接受
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ScanTaskResponse"
      security:
      - bearerAuth: []
  /api/v1/resources/scan/{taskId}:
    get:
      tags:
      - Resources
      summary: 獲取掃描結果
      description: 獲取網段掃描任務的結果
      operationId: getScanResult
      parameters:
      - name: taskId
        in: path
        description: 掃描任務 ID
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: 掃描結果
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ScanResult"
      security:
      - bearerAuth: []
  /api/v1/resource-groups:
    get:
      tags:
      - Resource Groups
      summary: 獲取群組列表
      description: 獲取所有資源群組
      operationId: listResourceGroups
      responses:
        "200":
          description: 群組列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResourceGroupList"
      security:
      - bearerAuth: []
    post:
      tags:
      - Resource Groups
      summary: 創建群組
      description: 創建新的資源群組
      operationId: createResourceGroup
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ResourceGroupCreateRequest"
        required: true
      responses:
        "201":
          description: 群組創建成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResourceGroup"
      security:
      - bearerAuth: []
  /api/v1/resource-groups/{groupId}:
    put:
      tags:
      - Resource Groups
      summary: 更新群組
      description: 更新資源群組資訊
      operationId: updateResourceGroup
      parameters:
      - name: groupId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ResourceGroupUpdateRequest"
        required: true
      responses:
        "200":
          description: 群組更新成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResourceGroup"
      security:
      - bearerAuth: []
    delete:
      tags:
      - Resource Groups
      summary: 刪除群組
      description: 刪除資源群組
      operationId: deleteResourceGroup
      parameters:
      - name: groupId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "204":
          description: 群組刪除成功
      security:
      - bearerAuth: []
  /api/v1/resource-groups/{groupId}/members:
    post:
      tags:
      - Resource Groups
      summary: 管理群組成員
      description: 新增或移除群組成員
      operationId: manageGroupMembers
      parameters:
      - name: groupId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/GroupMemberOperation"
        required: true
      responses:
        "200":
          description: 操作成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ResourceGroup"
      security:
      - bearerAuth: []
  /api/v1/incidents:
    get:
      tags:
      - Incidents
      summary: 獲取事件列表
      description: 獲取所有事件記錄
      operationId: listIncidents
      parameters:
      - name: page
        in: query
        description: 頁碼（從 1 開始）
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          default: 1
      - name: page_size
        in: query
        description: 每頁筆數
        required: false
        style: form
        explode: true
        schema:
          maximum: 100
          minimum: 1
          type: integer
          default: 20
      - name: status
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
          enum:
          - new
          - acknowledged
          - resolved
      - name: severity
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
          enum:
          - critical
          - error
          - warning
          - info
      - name: start_time
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
          format: date-time
      - name: end_time
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
          format: date-time
      responses:
        "200":
          description: 事件列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/IncidentList"
      security:
      - bearerAuth: []
    post:
      tags:
      - Incidents
      summary: 創建事件
      description: 創建新的事件記錄
      operationId: createIncident
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/IncidentCreateRequest"
        required: true
      responses:
        "201":
          description: 事件創建成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Incident"
      security:
      - bearerAuth: []
  /api/v1/incidents/{incidentId}:
    get:
      tags:
      - Incidents
      summary: 獲取事件詳情
      description: 獲取特定事件的詳細資訊
      operationId: getIncident
      parameters:
      - name: incidentId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: 事件詳情
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Incident"
      security:
      - bearerAuth: []
    put:
      tags:
      - Incidents
      summary: 更新事件
      description: 更新事件資訊
      operationId: updateIncident
      parameters:
      - name: incidentId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/IncidentUpdateRequest"
        required: true
      responses:
        "200":
          description: 事件更新成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Incident"
      security:
      - bearerAuth: []
  /api/v1/incidents/{incidentId}/acknowledge:
    post:
      tags:
      - Incidents
      summary: 確認事件
      description: 確認事件已被接收處理
      operationId: acknowledgeIncident
      parameters:
      - name: incidentId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/incidentId_acknowledge_body"
      responses:
        "200":
          description: 事件確認成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Incident"
      security:
      - bearerAuth: []
  /api/v1/incidents/{incidentId}/resolve:
    post:
      tags:
      - Incidents
      summary: 解決事件
      description: 標記事件為已解決
      operationId: resolveIncident
      parameters:
      - name: incidentId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/incidentId_resolve_body"
      responses:
        "200":
          description: 事件解決成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Incident"
      security:
      - bearerAuth: []
  /api/v1/incidents/{incidentId}/assign:
    post:
      tags:
      - Incidents
      summary: 指派事件
      description: 指派事件給特定人員處理
      operationId: assignIncident
      parameters:
      - name: incidentId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/incidentId_assign_body"
        required: true
      responses:
        "200":
          description: 事件指派成功
      security:
      - bearerAuth: []
  /api/v1/incidents/{incidentId}/comments:
    post:
      tags:
      - Incidents
      summary: 新增事件註記
      description: 為事件新增註記
      operationId: addIncidentComment
      parameters:
      - name: incidentId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/incidentId_comments_body"
        required: true
      responses:
        "201":
          description: 註記新增成功
      security:
      - bearerAuth: []
  /api/v1/incidents/generate-report:
    post:
      tags:
      - Incidents
      summary: AI 生成事件報告
      description: 使用 AI 生成事件分析報告 (由 SRE Assistant 處理)
      operationId: generateIncidentReport
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/incidents_generatereport_body"
        required: true
      responses:
        "200":
          description: AI 報告生成成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AIGeneratedReport"
      security:
      - bearerAuth: []
  /api/v1/alert-rules:
    get:
      tags:
      - Alert Rules
      summary: 獲取告警規則列表
      description: 獲取所有告警規則
      operationId: listAlertRules
      parameters:
      - name: enabled
        in: query
        description: 是否啟用
        required: false
        style: form
        explode: true
        schema:
          type: boolean
      responses:
        "200":
          description: 告警規則列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AlertRuleList"
      security:
      - bearerAuth: []
    post:
      tags:
      - Alert Rules
      summary: 創建告警規則
      description: 創建新的告警規則
      operationId: createAlertRule
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AlertRuleCreateRequest"
        required: true
      responses:
        "201":
          description: 規則創建成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AlertRule"
      security:
      - bearerAuth: []
  /api/v1/alert-rules/{ruleId}:
    get:
      tags:
      - Alert Rules
      summary: 獲取規則詳情
      description: 獲取特定告警規則的詳情
      operationId: getAlertRule
      parameters:
      - name: ruleId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: 規則詳情
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AlertRule"
      security:
      - bearerAuth: []
    put:
      tags:
      - Alert Rules
      summary: 更新告警規則
      description: 更新告警規則
      operationId: updateAlertRule
      parameters:
      - name: ruleId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/AlertRuleUpdateRequest"
        required: true
      responses:
        "200":
          description: 規則更新成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AlertRule"
      security:
      - bearerAuth: []
    delete:
      tags:
      - Alert Rules
      summary: 刪除告警規則
      description: 刪除告警規則
      operationId: deleteAlertRule
      parameters:
      - name: ruleId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "204":
          description: 規則刪除成功
      security:
      - bearerAuth: []
  /api/v1/alert-rules/{ruleId}/test:
    post:
      tags:
      - Alert Rules
      summary: 測試告警規則
      description: 測試告警規則是否正常運作
      operationId: testAlertRule
      parameters:
      - name: ruleId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: 測試結果
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/inline_response_200"
      security:
      - bearerAuth: []
  /api/v1/alert-rules/{ruleId}/enable:
    post:
      tags:
      - Alert Rules
      summary: 啟用規則
      description: 啟用告警規則
      operationId: enableAlertRule
      parameters:
      - name: ruleId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: 規則已啟用
      security:
      - bearerAuth: []
  /api/v1/alert-rules/{ruleId}/disable:
    post:
      tags:
      - Alert Rules
      summary: 停用規則
      description: 停用告警規則
      operationId: disableAlertRule
      parameters:
      - name: ruleId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: 規則已停用
      security:
      - bearerAuth: []
  /api/v1/alerts:
    get:
      tags:
      - Incidents
      summary: 獲取當前告警列表
      description: 獲取所有活躍的告警
      operationId: listAlerts
      parameters:
      - name: severity
        in: query
        description: 嚴重程度
        required: false
        style: form
        explode: true
        schema:
          type: string
          enum:
          - P0
          - P1
          - P2
          - P3
      - name: status
        in: query
        description: 告警狀態
        required: false
        style: form
        explode: true
        schema:
          type: string
          enum:
          - firing
          - resolved
          - pending
      - name: start_time
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
          format: date-time
      - name: end_time
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
          format: date-time
      responses:
        "200":
          description: 告警列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/inline_response_200_1"
      security:
      - bearerAuth: []
  /api/v1/automation/scripts:
    get:
      tags:
      - Automation
      summary: 獲取腳本列表
      description: 獲取所有自動化腳本
      operationId: listScripts
      parameters:
      - name: category
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
          enum:
          - diagnostic
          - remediation
          - maintenance
          - custom
      responses:
        "200":
          description: 腳本列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ScriptList"
      security:
      - bearerAuth: []
    post:
      tags:
      - Automation
      summary: 創建腳本
      description: 創建新的自動化腳本
      operationId: createScript
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ScriptCreateRequest"
        required: true
      responses:
        "201":
          description: 腳本創建成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Script"
      security:
      - bearerAuth: []
  /api/v1/automation/scripts/{scriptId}:
    get:
      tags:
      - Automation
      summary: 獲取腳本詳情
      description: 獲取特定腳本的詳情
      operationId: getScript
      parameters:
      - name: scriptId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: 腳本詳情
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Script"
      security:
      - bearerAuth: []
    put:
      tags:
      - Automation
      summary: 更新腳本
      description: 更新自動化腳本
      operationId: updateScript
      parameters:
      - name: scriptId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ScriptUpdateRequest"
        required: true
      responses:
        "200":
          description: 腳本更新成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Script"
      security:
      - bearerAuth: []
    delete:
      tags:
      - Automation
      summary: 刪除腳本
      description: 刪除自動化腳本
      operationId: deleteScript
      parameters:
      - name: scriptId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "204":
          description: 腳本刪除成功
      security:
      - bearerAuth: []
  /api/v1/automation/execute:
    post:
      tags:
      - Automation
      summary: 執行腳本
      description: 執行自動化腳本
      operationId: executeScript
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ScriptExecuteRequest"
        required: true
      responses:
        "202":
          description: 執行任務已接受
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExecutionTaskResponse"
      security:
      - bearerAuth: []
  /api/v1/automation/executions:
    get:
      tags:
      - Automation
      summary: 執行歷史
      description: 查詢腳本執行歷史
      operationId: listExecutions
      parameters:
      - name: page
        in: query
        description: 頁碼（從 1 開始）
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          default: 1
      - name: page_size
        in: query
        description: 每頁筆數
        required: false
        style: form
        explode: true
        schema:
          maximum: 100
          minimum: 1
          type: integer
          default: 20
      - name: script_id
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
      - name: status
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
          enum:
          - pending
          - running
          - success
          - failed
      responses:
        "200":
          description: 執行歷史列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExecutionList"
      security:
      - bearerAuth: []
  /api/v1/automation/executions/{executionId}:
    get:
      tags:
      - Automation
      summary: 執行詳情
      description: 獲取執行任務的詳情
      operationId: getExecution
      parameters:
      - name: executionId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: 執行詳情
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Execution"
      security:
      - bearerAuth: []
  /api/v1/automation/schedules:
    post:
      tags:
      - Automation
      summary: 創建排程
      description: 創建腳本執行排程
      operationId: createSchedule
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ScheduleCreateRequest"
        required: true
      responses:
        "201":
          description: 排程創建成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Schedule"
      security:
      - bearerAuth: []
  /api/v1/users:
    get:
      tags:
      - Users
      summary: 獲取使用者列表
      description: 獲取所有使用者
      operationId: listUsers
      parameters:
      - name: page
        in: query
        description: 頁碼（從 1 開始）
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          default: 1
      - name: page_size
        in: query
        description: 每頁筆數
        required: false
        style: form
        explode: true
        schema:
          maximum: 100
          minimum: 1
          type: integer
          default: 20
      - name: role
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
          enum:
          - super_admin
          - team_manager
          - team_member
      - name: team_id
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
      responses:
        "200":
          description: 使用者列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserList"
      security:
      - bearerAuth: []
    post:
      tags:
      - Users
      summary: 創建使用者
      description: 創建新使用者
      operationId: createUser
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserCreateRequest"
        required: true
      responses:
        "201":
          description: 使用者創建成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
      security:
      - bearerAuth: []
  /api/v1/users/{userId}:
    get:
      tags:
      - Users
      summary: 獲取使用者詳情
      description: 獲取特定使用者的詳情
      operationId: getUser
      parameters:
      - name: userId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: 使用者詳情
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
      security:
      - bearerAuth: []
    put:
      tags:
      - Users
      summary: 更新使用者
      description: 更新使用者資訊
      operationId: updateUser
      parameters:
      - name: userId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/UserUpdateRequest"
        required: true
      responses:
        "200":
          description: 使用者更新成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/User"
      security:
      - bearerAuth: []
    delete:
      tags:
      - Users
      summary: 刪除使用者
      description: 刪除使用者
      operationId: deleteUser
      parameters:
      - name: userId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "204":
          description: 使用者刪除成功
      security:
      - bearerAuth: []
  /api/v1/users/profile:
    get:
      tags:
      - Users
      summary: 獲取個人資料
      description: 獲取當前登入使用者的個人資料
      operationId: getProfile
      responses:
        "200":
          description: 個人資料
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserProfile"
      security:
      - bearerAuth: []
    put:
      tags:
      - Users
      summary: 更新個人資料
      description: 更新當前登入使用者的個人資料
      operationId: updateProfile
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ProfileUpdateRequest"
        required: true
      responses:
        "200":
          description: 個人資料更新成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/UserProfile"
      security:
      - bearerAuth: []
  /api/v1/users/profile/change-password:
    post:
      tags:
      - Users
      summary: 修改密碼
      description: 修改當前使用者的密碼
      operationId: changePassword
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/profile_changepassword_body"
        required: true
      responses:
        "200":
          description: 密碼修改成功
      security:
      - bearerAuth: []
  /api/v1/users/profile/notifications:
    put:
      tags:
      - Users
      summary: 更新通知設定
      description: 更新個人通知偏好設定
      operationId: updateNotificationPreferences
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NotificationPreferences"
        required: true
      responses:
        "200":
          description: 通知設定更新成功
      security:
      - bearerAuth: []
  /api/v1/users/profile/verify-contact:
    post:
      tags:
      - Users
      summary: 驗證聯絡方式
      description: 驗證使用者的聯絡方式（Email、SMS、LINE）
      operationId: verifyContact
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/profile_verifycontact_body"
        required: true
      responses:
        "200":
          description: 驗證成功或驗證碼已發送
      security:
      - bearerAuth: []
  /api/v1/teams:
    get:
      tags:
      - Teams
      summary: 獲取團隊列表
      description: 獲取所有團隊
      operationId: listTeams
      responses:
        "200":
          description: 團隊列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/TeamList"
      security:
      - bearerAuth: []
    post:
      tags:
      - Teams
      summary: 創建團隊
      description: 創建新團隊
      operationId: createTeam
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TeamCreateRequest"
        required: true
      responses:
        "201":
          description: 團隊創建成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Team"
      security:
      - bearerAuth: []
  /api/v1/teams/{teamId}:
    get:
      tags:
      - Teams
      summary: 獲取團隊詳情
      description: 獲取特定團隊的詳情
      operationId: getTeam
      parameters:
      - name: teamId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: 團隊詳情
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Team"
      security:
      - bearerAuth: []
    put:
      tags:
      - Teams
      summary: 更新團隊
      description: 更新團隊資訊
      operationId: updateTeam
      parameters:
      - name: teamId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/TeamUpdateRequest"
        required: true
      responses:
        "200":
          description: 團隊更新成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Team"
      security:
      - bearerAuth: []
    delete:
      tags:
      - Teams
      summary: 刪除團隊
      description: 刪除團隊
      operationId: deleteTeam
      parameters:
      - name: teamId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "204":
          description: 團隊刪除成功
      security:
      - bearerAuth: []
  /api/v1/teams/{teamId}/members:
    post:
      tags:
      - Teams
      summary: 管理團隊成員
      description: 新增或移除團隊成員
      operationId: manageTeamMembers
      parameters:
      - name: teamId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/teamId_members_body"
        required: true
      responses:
        "200":
          description: 成員管理成功
      security:
      - bearerAuth: []
  /api/v1/notification-channels:
    get:
      tags:
      - Notifications
      summary: 獲取通知管道列表
      description: 獲取所有通知管道
      operationId: listNotificationChannels
      responses:
        "200":
          description: 通知管道列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotificationChannelList"
      security:
      - bearerAuth: []
    post:
      tags:
      - Notifications
      summary: 創建通知管道
      description: 創建新的通知管道
      operationId: createNotificationChannel
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NotificationChannelCreateRequest"
        required: true
      responses:
        "201":
          description: 通知管道創建成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotificationChannel"
      security:
      - bearerAuth: []
  /api/v1/notification-channels/{channelId}:
    get:
      tags:
      - Notifications
      summary: 獲取管道詳情
      description: 獲取特定通知管道的詳情
      operationId: getNotificationChannel
      parameters:
      - name: channelId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "200":
          description: 通知管道詳情
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotificationChannel"
      security:
      - bearerAuth: []
    put:
      tags:
      - Notifications
      summary: 更新通知管道
      description: 更新通知管道設定
      operationId: updateNotificationChannel
      parameters:
      - name: channelId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/NotificationChannelUpdateRequest"
        required: true
      responses:
        "200":
          description: 通知管道更新成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/NotificationChannel"
      security:
      - bearerAuth: []
    delete:
      tags:
      - Notifications
      summary: 刪除通知管道
      description: 刪除通知管道
      operationId: deleteNotificationChannel
      parameters:
      - name: channelId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      responses:
        "204":
          description: 通知管道刪除成功
      security:
      - bearerAuth: []
  /api/v1/notification-channels/{channelId}/test:
    post:
      tags:
      - Notifications
      summary: 測試通知管道
      description: 發送測試訊息到通知管道
      operationId: testNotificationChannel
      parameters:
      - name: channelId
        in: path
        required: true
        style: simple
        explode: false
        schema:
          type: string
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/channelId_test_body"
      responses:
        "200":
          description: 測試訊息已發送
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/inline_response_200_2"
      security:
      - bearerAuth: []
  /api/v1/settings:
    get:
      tags:
      - Settings
      summary: 獲取系統設定
      description: 獲取系統設定（需管理員權限）
      operationId: getSettings
      responses:
        "200":
          description: 系統設定
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SystemSettings"
      security:
      - bearerAuth: []
    put:
      tags:
      - Settings
      summary: 更新系統設定
      description: 更新系統設定（需管理員權限）
      operationId: updateSettings
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/SystemSettings"
        required: true
      responses:
        "200":
          description: 系統設定更新成功
      security:
      - bearerAuth: []
  /api/v1/settings/maintenance-windows:
    get:
      tags:
      - Settings
      summary: 獲取維護時段
      description: 獲取所有維護時段設定
      operationId: listMaintenanceWindows
      responses:
        "200":
          description: 維護時段列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MaintenanceWindowList"
      security:
      - bearerAuth: []
    post:
      tags:
      - Settings
      summary: 創建維護時段
      description: 創建新的維護時段
      operationId: createMaintenanceWindow
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/MaintenanceWindowCreateRequest"
        required: true
      responses:
        "201":
          description: 維護時段創建成功
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/MaintenanceWindow"
      security:
      - bearerAuth: []
  /api/v1/audit-logs:
    get:
      tags:
      - Audit
      summary: 查詢審計日誌
      description: 查詢系統審計日誌
      operationId: queryAuditLogs
      parameters:
      - name: page
        in: query
        description: 頁碼（從 1 開始）
        required: false
        style: form
        explode: true
        schema:
          minimum: 1
          type: integer
          default: 1
      - name: page_size
        in: query
        description: 每頁筆數
        required: false
        style: form
        explode: true
        schema:
          maximum: 100
          minimum: 1
          type: integer
          default: 20
      - name: user_id
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
      - name: action
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
          enum:
          - create
          - update
          - delete
          - execute
          - login
          - logout
      - name: resource_type
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
      - name: start_time
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
          format: date-time
      - name: end_time
        in: query
        required: false
        style: form
        explode: true
        schema:
          type: string
          format: date-time
      responses:
        "200":
          description: 審計日誌列表
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/AuditLogList"
      security:
      - bearerAuth: []
  /api/v1/callbacks/diagnosis-complete:
    post:
      tags:
      - Callbacks
      summary: 接收診斷完成的回調
      description: SRE Assistant 完成診斷後會呼叫此端點
      operationId: diagnosisCallback
      requestBody:
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/callbacks_diagnosiscomplete_body"
        required: true
      responses:
        "200":
          description: 回調已接收
components:
  schemas:
    ErrorResponse:
      required:
      - error
      - message
      type: object
      properties:
        error:
          type: string
          description: 錯誤代碼
        message:
          type: string
          description: 錯誤訊息
        details:
          type: object
          description: 錯誤詳情
        request_id:
          type: string
          description: 請求追蹤 ID
    Pagination:
      type: object
      properties:
        page:
          type: integer
          description: 當前頁碼
        page_size:
          type: integer
          description: 每頁筆數
        total:
          type: integer
          description: 總筆數
        total_pages:
          type: integer
          description: 總頁數
      example:
        total: 7
        page: 5
        total_pages: 9
        page_size: 2
    HealthStatus:
      required:
      - status
      - timestamp
      type: object
      properties:
        status:
          type: string
          enum:
          - healthy
          - unhealthy
        timestamp:
          type: string
          format: date-time
        version:
          type: string
        uptime:
          type: integer
          description: 運行時間（秒）
      example:
        version: version
        status: healthy
        timestamp: 2000-01-23T04:56:07.000+00:00
        uptime: 0
    ReadinessStatus:
      required:
      - checks
      - ready
      type: object
      properties:
        ready:
          type: boolean
        checks:
          $ref: "#/components/schemas/ReadinessStatus_checks"
      example:
        checks:
          database: true
          keycloak: true
          sre_assistant: true
          redis: true
        ready: true
    DashboardSummary:
      type: object
      properties:
        alerts:
          $ref: "#/components/schemas/DashboardSummary_alerts"
        resources:
          $ref: "#/components/schemas/DashboardSummary_resources"
        kpis:
          $ref: "#/components/schemas/DashboardSummary_kpis"
      example:
        alerts:
          new: 0
          resolved_today: 1
          processing: 6
        resources:
          total: 5
          critical: 7
          healthy: 5
          warning: 2
        kpis:
          mttr: 3.616076749251911
          incident_rate: 2.027123023002322
          availability: 9.301444
    TrendData:
      type: object
      properties:
        period:
          type: string
        data_points:
          type: array
          items:
            $ref: "#/components/schemas/TrendData_data_points"
      example:
        period: period
        data_points:
        - alerts: 0
          resources_unhealthy: 5
          incidents: 6
          resources_healthy: 1
          timestamp: 2000-01-23T04:56:07.000+00:00
        - alerts: 0
          resources_unhealthy: 5
          incidents: 6
          resources_healthy: 1
          timestamp: 2000-01-23T04:56:07.000+00:00
    ResourceDistribution:
      type: object
      properties:
        by_status:
          $ref: "#/components/schemas/ResourceDistribution_by_status"
        by_type:
          type: object
          additionalProperties:
            type: integer
        by_group:
          type: array
          items:
            $ref: "#/components/schemas/ResourceDistribution_by_group"
      example:
        by_status:
          critical: 1
          healthy: 0
          warning: 6
          unknown: 5
        by_group:
        - total: 2
          critical: 3
          group_id: group_id
          group_name: group_name
          healthy: 7
          warning: 9
        - total: 2
          critical: 3
          group_id: group_id
          group_name: group_name
          healthy: 7
          warning: 9
        by_type:
          key: 5
    Resource:
      required:
      - id
      - name
      - status
      - type
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        type:
          type: string
          enum:
          - server
          - network
          - database
          - application
          - container
        status:
          type: string
          enum:
          - healthy
          - warning
          - critical
          - unknown
        ip_address:
          type: string
        location:
          type: string
        group_id:
          type: string
        group_name:
          type: string
        tags:
          type: array
          items:
            type: string
        owner:
          type: string
          description: 負責人
        description:
          type: string
        maintenance_window:
          $ref: "#/components/schemas/MaintenanceWindow"
        metrics:
          $ref: "#/components/schemas/Resource_metrics"
        metadata:
          type: object
          additionalProperties: true
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      example:
        owner: owner
        metadata: ""
        group_name: group_name
        maintenance_window:
          start_time: 2000-01-23T04:56:07.000+00:00
          recurrence_pattern: daily
          recurring: true
          name: name
          end_time: 2000-01-23T04:56:07.000+00:00
          affected_resources:
          - affected_resources
          - affected_resources
          description: description
          created_at: 2000-01-23T04:56:07.000+00:00
          id: id
          created_by: created_by
        description: description
        created_at: 2000-01-23T04:56:07.000+00:00
        ip_address: ip_address
        type: server
        tags:
        - tags
        - tags
        updated_at: 2000-01-23T04:56:07.000+00:00
        group_id: group_id
        name: name
        location: location
        id: id
        metrics:
          memory_usage: 6.0274563
          disk_usage: 1.4658129
          network_io: 5.962134
          cpu_usage: 0.8008282
        status: healthy
    ResourceList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/Resource"
        pagination:
          $ref: "#/components/schemas/Pagination"
      example:
        pagination:
          total: 7
          page: 5
          total_pages: 9
          page_size: 2
        items:
        - owner: owner
          metadata: ""
          group_name: group_name
          maintenance_window:
            start_time: 2000-01-23T04:56:07.000+00:00
            recurrence_pattern: daily
            recurring: true
            name: name
            end_time: 2000-01-23T04:56:07.000+00:00
            affected_resources:
            - affected_resources
            - affected_resources
            description: description
            created_at: 2000-01-23T04:56:07.000+00:00
            id: id
            created_by: created_by
          description: description
          created_at: 2000-01-23T04:56:07.000+00:00
          ip_address: ip_address
          type: server
          tags:
          - tags
          - tags
          updated_at: 2000-01-23T04:56:07.000+00:00
          group_id: group_id
          name: name
          location: location
          id: id
          metrics:
            memory_usage: 6.0274563
            disk_usage: 1.4658129
            network_io: 5.962134
            cpu_usage: 0.8008282
          status: healthy
        - owner: owner
          metadata: ""
          group_name: group_name
          maintenance_window:
            start_time: 2000-01-23T04:56:07.000+00:00
            recurrence_pattern: daily
            recurring: true
            name: name
            end_time: 2000-01-23T04:56:07.000+00:00
            affected_resources:
            - affected_resources
            - affected_resources
            description: description
            created_at: 2000-01-23T04:56:07.000+00:00
            id: id
            created_by: created_by
          description: description
          created_at: 2000-01-23T04:56:07.000+00:00
          ip_address: ip_address
          type: server
          tags:
          - tags
          - tags
          updated_at: 2000-01-23T04:56:07.000+00:00
          group_id: group_id
          name: name
          location: location
          id: id
          metrics:
            memory_usage: 6.0274563
            disk_usage: 1.4658129
            network_io: 5.962134
            cpu_usage: 0.8008282
          status: healthy
    ResourceCreateRequest:
      required:
      - ip_address
      - name
      - type
      type: object
      properties:
        name:
          type: string
        type:
          type: string
          enum:
          - server
          - network
          - database
          - application
          - container
        ip_address:
          type: string
        location:
          type: string
        group_id:
          type: string
        tags:
          type: array
          items:
            type: string
        owner:
          type: string
        description:
          type: string
        metadata:
          type: object
    ResourceUpdateRequest:
      type: object
      properties:
        name:
          type: string
        location:
          type: string
        group_id:
          type: string
        tags:
          type: array
          items:
            type: string
        owner:
          type: string
        description:
          type: string
        metadata:
          type: object
    BatchResourceOperation:
      required:
      - operation
      - resource_ids
      type: object
      properties:
        operation:
          type: string
          enum:
          - delete
          - add_to_group
          - remove_from_group
          - update_tags
        resource_ids:
          type: array
          items:
            type: string
        parameters:
          $ref: "#/components/schemas/BatchResourceOperation_parameters"
    BatchOperationResult:
      type: object
      properties:
        success_count:
          type: integer
        failure_count:
          type: integer
        failures:
          type: array
          items:
            $ref: "#/components/schemas/BatchOperationResult_failures"
      example:
        failures:
        - resource_id: resource_id
          error: error
        - resource_id: resource_id
          error: error
        success_count: 0
        failure_count: 6
    NetworkScanRequest:
      required:
      - cidr
      type: object
      properties:
        cidr:
          type: string
          description: CIDR 格式的網段（如 192.168.1.0/24）
        port_ranges:
          type: array
          items:
            type: string
          default:
          - "22"
          - "80"
          - "443"
          - "3389"
        timeout:
          type: integer
          description: 掃描超時時間（秒）
          default: 30
    ScanTaskResponse:
      type: object
      properties:
        task_id:
          type: string
        status:
          type: string
          enum:
          - pending
          - scanning
          - completed
          - failed
        message:
          type: string
      example:
        task_id: task_id
        message: message
        status: pending
    ScanResult:
      type: object
      properties:
        task_id:
          type: string
        status:
          type: string
          enum:
          - completed
          - failed
        discovered_resources:
          type: array
          items:
            $ref: "#/components/schemas/ScanResult_discovered_resources"
        scan_time:
          type: string
          format: date-time
        error:
          type: string
      example:
        discovered_resources:
        - os_detection: os_detection
          hostname: hostname
          open_ports:
          - 0
          - 0
          ip_address: ip_address
          services:
          - services
          - services
        - os_detection: os_detection
          hostname: hostname
          open_ports:
          - 0
          - 0
          ip_address: ip_address
          services:
          - services
          - services
        task_id: task_id
        scan_time: 2000-01-23T04:56:07.000+00:00
        error: error
        status: completed
    ResourceGroup:
      required:
      - id
      - name
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        parent_group_id:
          type: string
        resource_count:
          type: integer
        status_summary:
          $ref: "#/components/schemas/ResourceGroup_status_summary"
        tags:
          type: array
          items:
            type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      example:
        updated_at: 2000-01-23T04:56:07.000+00:00
        parent_group_id: parent_group_id
        name: name
        description: description
        created_at: 2000-01-23T04:56:07.000+00:00
        id: id
        resource_count: 0
        status_summary:
          critical: 5
          healthy: 6
          warning: 1
        tags:
        - tags
        - tags
    ResourceGroupList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/ResourceGroup"
        total:
          type: integer
      example:
        total: 5
        items:
        - updated_at: 2000-01-23T04:56:07.000+00:00
          parent_group_id: parent_group_id
          name: name
          description: description
          created_at: 2000-01-23T04:56:07.000+00:00
          id: id
          resource_count: 0
          status_summary:
            critical: 5
            healthy: 6
            warning: 1
          tags:
          - tags
          - tags
        - updated_at: 2000-01-23T04:56:07.000+00:00
          parent_group_id: parent_group_id
          name: name
          description: description
          created_at: 2000-01-23T04:56:07.000+00:00
          id: id
          resource_count: 0
          status_summary:
            critical: 5
            healthy: 6
            warning: 1
          tags:
          - tags
          - tags
    ResourceGroupCreateRequest:
      required:
      - name
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        parent_group_id:
          type: string
        tags:
          type: array
          items:
            type: string
    ResourceGroupUpdateRequest:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        parent_group_id:
          type: string
        tags:
          type: array
          items:
            type: string
    GroupMemberOperation:
      required:
      - operation
      - resource_ids
      type: object
      properties:
        operation:
          type: string
          enum:
          - add
          - remove
        resource_ids:
          type: array
          items:
            type: string
    DiagnosticRequest:
      required:
      - affected_services
      - incident_id
      - severity
      type: object
      properties:
        incident_id:
          type: string
        severity:
          type: string
          enum:
          - P0
          - P1
          - P2
          - P3
        affected_services:
          type: array
          items:
            type: string
        context:
          type: object
          additionalProperties: true
    DiagnosticTaskResponse:
      type: object
      properties:
        session_id:
          type: string
          format: uuid
        status:
          type: string
          enum:
          - accepted
          - processing
          - completed
          - failed
        message:
          type: string
        estimated_time:
          type: integer
          description: 預估完成時間（秒）
    DiagnosticStatus:
      type: object
      properties:
        session_id:
          type: string
          format: uuid
        status:
          type: string
          enum:
          - processing
          - completed
          - failed
        progress:
          maximum: 100
          minimum: 0
          type: integer
        current_step:
          type: string
        result:
          $ref: "#/components/schemas/DiagnosticResult"
        error:
          type: string
    DiagnosticResult:
      type: object
      properties:
        summary:
          type: string
        findings:
          type: array
          items:
            $ref: "#/components/schemas/DiagnosticResult_findings"
        recommended_actions:
          type: array
          items:
            type: string
        confidence_score:
          maximum: 1
          minimum: 0
          type: number
          format: float
        tools_used:
          type: array
          items:
            type: string
        execution_time:
          type: number
          description: 執行時間（秒）
    DiagnosticHistoryList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/DiagnosticHistoryList_items"
        pagination:
          $ref: "#/components/schemas/Pagination"
    AlertAnalysisRequest:
      required:
      - alert_ids
      type: object
      properties:
        alert_ids:
          type: array
          items:
            type: string
        correlation_window:
          type: integer
          description: 關聯時間窗口（秒）
          default: 300
    CapacityAnalysisRequest:
      required:
      - metric_type
      - resource_ids
      type: object
      properties:
        resource_ids:
          type: array
          items:
            type: string
        metric_type:
          type: string
          enum:
          - cpu
          - memory
          - disk
          - network
        forecast_days:
          maximum: 365
          minimum: 7
          type: integer
          default: 30
    CapacityAnalysisResponse:
      type: object
      properties:
        current_usage:
          $ref: "#/components/schemas/CapacityAnalysisResponse_current_usage"
        forecast:
          $ref: "#/components/schemas/CapacityAnalysisResponse_forecast"
        recommendations:
          type: array
          items:
            $ref: "#/components/schemas/CapacityAnalysisResponse_recommendations"
        chart_data:
          type: array
          items:
            $ref: "#/components/schemas/CapacityAnalysisResponse_chart_data"
    Incident:
      required:
      - id
      - severity
      - status
      - title
      type: object
      properties:
        id:
          type: string
        title:
          type: string
        description:
          type: string
        severity:
          type: string
          enum:
          - critical
          - error
          - warning
          - info
        status:
          type: string
          enum:
          - new
          - acknowledged
          - resolved
        affected_resources:
          type: array
          items:
            type: string
        assignee:
          type: string
        acknowledged_by:
          type: string
        acknowledged_at:
          type: string
          format: date-time
        resolved_by:
          type: string
        resolved_at:
          type: string
          format: date-time
        resolution:
          type: string
        root_cause:
          type: string
        comments:
          type: array
          items:
            $ref: "#/components/schemas/Incident_comments"
        tags:
          type: array
          items:
            type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      example:
        severity: critical
        comments:
        - created_at: 2000-01-23T04:56:07.000+00:00
          comment: comment
          id: id
          user: user
        - created_at: 2000-01-23T04:56:07.000+00:00
          comment: comment
          id: id
          user: user
        description: description
        created_at: 2000-01-23T04:56:07.000+00:00
        title: title
        resolution: resolution
        tags:
        - tags
        - tags
        resolved_by: resolved_by
        updated_at: 2000-01-23T04:56:07.000+00:00
        resolved_at: 2000-01-23T04:56:07.000+00:00
        affected_resources:
        - affected_resources
        - affected_resources
        acknowledged_by: acknowledged_by
        id: id
        assignee: assignee
        acknowledged_at: 2000-01-23T04:56:07.000+00:00
        status: new
        root_cause: root_cause
    IncidentList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/Incident"
        pagination:
          $ref: "#/components/schemas/Pagination"
      example:
        pagination:
          total: 7
          page: 5
          total_pages: 9
          page_size: 2
        items:
        - severity: critical
          comments:
          - created_at: 2000-01-23T04:56:07.000+00:00
            comment: comment
            id: id
            user: user
          - created_at: 2000-01-23T04:56:07.000+00:00
            comment: comment
            id: id
            user: user
          description: description
          created_at: 2000-01-23T04:56:07.000+00:00
          title: title
          resolution: resolution
          tags:
          - tags
          - tags
          resolved_by: resolved_by
          updated_at: 2000-01-23T04:56:07.000+00:00
          resolved_at: 2000-01-23T04:56:07.000+00:00
          affected_resources:
          - affected_resources
          - affected_resources
          acknowledged_by: acknowledged_by
          id: id
          assignee: assignee
          acknowledged_at: 2000-01-23T04:56:07.000+00:00
          status: new
          root_cause: root_cause
        - severity: critical
          comments:
          - created_at: 2000-01-23T04:56:07.000+00:00
            comment: comment
            id: id
            user: user
          - created_at: 2000-01-23T04:56:07.000+00:00
            comment: comment
            id: id
            user: user
          description: description
          created_at: 2000-01-23T04:56:07.000+00:00
          title: title
          resolution: resolution
          tags:
          - tags
          - tags
          resolved_by: resolved_by
          updated_at: 2000-01-23T04:56:07.000+00:00
          resolved_at: 2000-01-23T04:56:07.000+00:00
          affected_resources:
          - affected_resources
          - affected_resources
          acknowledged_by: acknowledged_by
          id: id
          assignee: assignee
          acknowledged_at: 2000-01-23T04:56:07.000+00:00
          status: new
          root_cause: root_cause
    IncidentCreateRequest:
      required:
      - severity
      - title
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        severity:
          type: string
          enum:
          - critical
          - error
          - warning
          - info
        affected_resources:
          type: array
          items:
            type: string
        tags:
          type: array
          items:
            type: string
    IncidentUpdateRequest:
      type: object
      properties:
        title:
          type: string
        description:
          type: string
        severity:
          type: string
          enum:
          - critical
          - error
          - warning
          - info
        affected_resources:
          type: array
          items:
            type: string
        tags:
          type: array
          items:
            type: string
    AIGeneratedReport:
      type: object
      properties:
        report_type:
          type: string
          enum:
          - summary
          - root_cause
          - impact_analysis
        content:
          type: string
          description: AI 生成的報告內容（Markdown 格式）
        key_findings:
          type: array
          items:
            type: string
        recommendations:
          type: array
          items:
            type: string
        confidence_score:
          type: number
          format: float
        generated_at:
          type: string
          format: date-time
      example:
        generated_at: 2000-01-23T04:56:07.000+00:00
        confidence_score: 0.8008282
        report_type: summary
        recommendations:
        - recommendations
        - recommendations
        content: content
        key_findings:
        - key_findings
        - key_findings
    AlertRule:
      required:
      - condition
      - enabled
      - id
      - name
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        condition:
          $ref: "#/components/schemas/AlertRule_condition"
        severity:
          type: string
          enum:
          - critical
          - error
          - warning
          - info
        enabled:
          type: boolean
        notification_channels:
          type: array
          items:
            type: string
        resource_filter:
          $ref: "#/components/schemas/AlertRule_resource_filter"
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      example:
        severity: critical
        resource_filter:
          types:
          - types
          - types
          groups:
          - groups
          - groups
          tags:
          - tags
          - tags
        condition:
          duration: 6
          metric: metric
          threshold: 0.8008281904610115
          operator: gt
        updated_at: 2000-01-23T04:56:07.000+00:00
        notification_channels:
        - notification_channels
        - notification_channels
        name: name
        description: description
        created_at: 2000-01-23T04:56:07.000+00:00
        id: id
        enabled: true
    AlertRuleList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/AlertRule"
        total:
          type: integer
      example:
        total: 1
        items:
        - severity: critical
          resource_filter:
            types:
            - types
            - types
            groups:
            - groups
            - groups
            tags:
            - tags
            - tags
          condition:
            duration: 6
            metric: metric
            threshold: 0.8008281904610115
            operator: gt
          updated_at: 2000-01-23T04:56:07.000+00:00
          notification_channels:
          - notification_channels
          - notification_channels
          name: name
          description: description
          created_at: 2000-01-23T04:56:07.000+00:00
          id: id
          enabled: true
        - severity: critical
          resource_filter:
            types:
            - types
            - types
            groups:
            - groups
            - groups
            tags:
            - tags
            - tags
          condition:
            duration: 6
            metric: metric
            threshold: 0.8008281904610115
            operator: gt
          updated_at: 2000-01-23T04:56:07.000+00:00
          notification_channels:
          - notification_channels
          - notification_channels
          name: name
          description: description
          created_at: 2000-01-23T04:56:07.000+00:00
          id: id
          enabled: true
    AlertRuleCreateRequest:
      required:
      - condition
      - name
      - severity
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        condition:
          $ref: "#/components/schemas/AlertRuleCreateRequest_condition"
        severity:
          type: string
          enum:
          - critical
          - error
          - warning
          - info
        notification_channels:
          type: array
          items:
            type: string
        resource_filter:
          type: object
    AlertRuleUpdateRequest:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        condition:
          type: object
        severity:
          type: string
        notification_channels:
          type: array
          items:
            type: string
        resource_filter:
          type: object
    Script:
      required:
      - category
      - id
      - language
      - name
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        category:
          type: string
          enum:
          - diagnostic
          - remediation
          - maintenance
          - custom
        language:
          type: string
          enum:
          - python
          - bash
          - powershell
          - javascript
        content:
          type: string
          description: 腳本內容
        parameters:
          type: array
          items:
            $ref: "#/components/schemas/Script_parameters"
        tags:
          type: array
          items:
            type: string
        version:
          type: string
        created_by:
          type: string
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      example:
        updated_at: 2000-01-23T04:56:07.000+00:00
        name: name
        description: description
        created_at: 2000-01-23T04:56:07.000+00:00
        language: python
        id: id
        category: diagnostic
        parameters:
        - default: ""
          name: name
          description: description
          type: string
          required: true
        - default: ""
          name: name
          description: description
          type: string
          required: true
        version: version
        created_by: created_by
        content: content
        tags:
        - tags
        - tags
    ScriptList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/Script"
        total:
          type: integer
      example:
        total: 0
        items:
        - updated_at: 2000-01-23T04:56:07.000+00:00
          name: name
          description: description
          created_at: 2000-01-23T04:56:07.000+00:00
          language: python
          id: id
          category: diagnostic
          parameters:
          - default: ""
            name: name
            description: description
            type: string
            required: true
          - default: ""
            name: name
            description: description
            type: string
            required: true
          version: version
          created_by: created_by
          content: content
          tags:
          - tags
          - tags
        - updated_at: 2000-01-23T04:56:07.000+00:00
          name: name
          description: description
          created_at: 2000-01-23T04:56:07.000+00:00
          language: python
          id: id
          category: diagnostic
          parameters:
          - default: ""
            name: name
            description: description
            type: string
            required: true
          - default: ""
            name: name
            description: description
            type: string
            required: true
          version: version
          created_by: created_by
          content: content
          tags:
          - tags
          - tags
    ScriptCreateRequest:
      required:
      - category
      - content
      - language
      - name
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        category:
          type: string
          enum:
          - diagnostic
          - remediation
          - maintenance
          - custom
        language:
          type: string
          enum:
          - python
          - bash
          - powershell
          - javascript
        content:
          type: string
        parameters:
          type: array
          items:
            type: object
        tags:
          type: array
          items:
            type: string
    ScriptUpdateRequest:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        content:
          type: string
        parameters:
          type: array
          items:
            type: object
        tags:
          type: array
          items:
            type: string
    ScriptExecuteRequest:
      required:
      - script_id
      type: object
      properties:
        script_id:
          type: string
        parameters:
          type: object
          additionalProperties: true
        target_resources:
          type: array
          items:
            type: string
        dry_run:
          type: boolean
          default: false
    ExecutionTaskResponse:
      type: object
      properties:
        execution_id:
          type: string
        status:
          type: string
          enum:
          - pending
          - running
          - success
          - failed
        message:
          type: string
      example:
        execution_id: execution_id
        message: message
        status: pending
    Execution:
      type: object
      properties:
        id:
          type: string
        script_id:
          type: string
        script_name:
          type: string
        status:
          type: string
          enum:
          - pending
          - running
          - success
          - failed
        parameters:
          type: object
        target_resources:
          type: array
          items:
            type: string
        output:
          type: string
        error:
          type: string
        started_at:
          type: string
          format: date-time
        completed_at:
          type: string
          format: date-time
        executed_by:
          type: string
      example:
        output: output
        completed_at: 2000-01-23T04:56:07.000+00:00
        executed_by: executed_by
        started_at: 2000-01-23T04:56:07.000+00:00
        script_id: script_id
        id: id
        target_resources:
        - target_resources
        - target_resources
        error: error
        script_name: script_name
        parameters: {}
        status: pending
    ExecutionList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/Execution"
        pagination:
          $ref: "#/components/schemas/Pagination"
      example:
        pagination:
          total: 7
          page: 5
          total_pages: 9
          page_size: 2
        items:
        - output: output
          completed_at: 2000-01-23T04:56:07.000+00:00
          executed_by: executed_by
          started_at: 2000-01-23T04:56:07.000+00:00
          script_id: script_id
          id: id
          target_resources:
          - target_resources
          - target_resources
          error: error
          script_name: script_name
          parameters: {}
          status: pending
        - output: output
          completed_at: 2000-01-23T04:56:07.000+00:00
          executed_by: executed_by
          started_at: 2000-01-23T04:56:07.000+00:00
          script_id: script_id
          id: id
          target_resources:
          - target_resources
          - target_resources
          error: error
          script_name: script_name
          parameters: {}
          status: pending
    Schedule:
      type: object
      properties:
        id:
          type: string
        script_id:
          type: string
        cron_expression:
          type: string
        enabled:
          type: boolean
        parameters:
          type: object
        target_resources:
          type: array
          items:
            type: string
        next_run:
          type: string
          format: date-time
        created_at:
          type: string
          format: date-time
      example:
        next_run: 2000-01-23T04:56:07.000+00:00
        cron_expression: cron_expression
        created_at: 2000-01-23T04:56:07.000+00:00
        script_id: script_id
        id: id
        target_resources:
        - target_resources
        - target_resources
        parameters: {}
        enabled: true
    ScheduleCreateRequest:
      required:
      - cron_expression
      - script_id
      type: object
      properties:
        script_id:
          type: string
        cron_expression:
          type: string
        parameters:
          type: object
        target_resources:
          type: array
          items:
            type: string
    User:
      required:
      - email
      - id
      - role
      - username
      type: object
      properties:
        id:
          type: string
        username:
          type: string
        email:
          type: string
          format: email
        name:
          type: string
        role:
          type: string
          enum:
          - super_admin
          - team_manager
          - team_member
        teams:
          type: array
          items:
            $ref: "#/components/schemas/User_teams"
        department:
          type: string
        phone:
          type: string
        avatar_url:
          type: string
        last_login:
          type: string
          format: date-time
        status:
          type: string
          enum:
          - active
          - inactive
          - suspended
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      example:
        role: super_admin
        teams:
        - name: name
          id: id
        - name: name
          id: id
        last_login: 2000-01-23T04:56:07.000+00:00
        created_at: 2000-01-23T04:56:07.000+00:00
        avatar_url: avatar_url
        updated_at: 2000-01-23T04:56:07.000+00:00
        phone: phone
        name: name
        id: id
        department: department
        email: ""
        username: username
        status: active
    UserList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/User"
        pagination:
          $ref: "#/components/schemas/Pagination"
      example:
        pagination:
          total: 7
          page: 5
          total_pages: 9
          page_size: 2
        items:
        - role: super_admin
          teams:
          - name: name
            id: id
          - name: name
            id: id
          last_login: 2000-01-23T04:56:07.000+00:00
          created_at: 2000-01-23T04:56:07.000+00:00
          avatar_url: avatar_url
          updated_at: 2000-01-23T04:56:07.000+00:00
          phone: phone
          name: name
          id: id
          department: department
          email: ""
          username: username
          status: active
        - role: super_admin
          teams:
          - name: name
            id: id
          - name: name
            id: id
          last_login: 2000-01-23T04:56:07.000+00:00
          created_at: 2000-01-23T04:56:07.000+00:00
          avatar_url: avatar_url
          updated_at: 2000-01-23T04:56:07.000+00:00
          phone: phone
          name: name
          id: id
          department: department
          email: ""
          username: username
          status: active
    UserCreateRequest:
      required:
      - email
      - password
      - role
      - username
      type: object
      properties:
        username:
          type: string
        email:
          type: string
          format: email
        password:
          type: string
          format: password
        name:
          type: string
        role:
          type: string
          enum:
          - super_admin
          - team_manager
          - team_member
        team_ids:
          type: array
          items:
            type: string
        department:
          type: string
        phone:
          type: string
    UserUpdateRequest:
      type: object
      properties:
        name:
          type: string
        email:
          type: string
          format: email
        role:
          type: string
          enum:
          - super_admin
          - team_manager
          - team_member
        team_ids:
          type: array
          items:
            type: string
        department:
          type: string
        phone:
          type: string
        status:
          type: string
          enum:
          - active
          - inactive
          - suspended
    UserProfile:
      type: object
      properties:
        id:
          type: string
        username:
          type: string
        email:
          type: string
        email_verified:
          type: boolean
        name:
          type: string
        phone:
          type: string
        phone_verified:
          type: boolean
        line_token:
          type: string
        line_verified:
          type: boolean
        avatar_url:
          type: string
        department:
          type: string
        teams:
          type: array
          items:
            $ref: "#/components/schemas/User_teams"
        notification_preferences:
          $ref: "#/components/schemas/NotificationPreferences"
      example:
        email_verified: true
        teams:
        - name: name
          id: id
        - name: name
          id: id
        phone_verified: true
        line_verified: true
        avatar_url: avatar_url
        phone: phone
        name: name
        notification_preferences:
          line: null
          sms:
            severity_filter:
            - severity_filter
            - severity_filter
            enabled: true
          quiet_hours:
            start: start
            end: end
            enabled: true
          email:
            severity_filter:
            - critical
            - critical
            enabled: true
        line_token: line_token
        id: id
        department: department
        email: email
        username: username
    ProfileUpdateRequest:
      type: object
      properties:
        name:
          type: string
        phone:
          type: string
        line_token:
          type: string
        department:
          type: string
        avatar_url:
          type: string
    NotificationPreferences:
      type: object
      properties:
        email:
          $ref: "#/components/schemas/NotificationPreferences_email"
        sms:
          $ref: "#/components/schemas/NotificationPreferences_sms"
        line:
          $ref: "#/components/schemas/NotificationPreferences_sms"
        quiet_hours:
          $ref: "#/components/schemas/NotificationPreferences_quiet_hours"
      example:
        line: null
        sms:
          severity_filter:
          - severity_filter
          - severity_filter
          enabled: true
        quiet_hours:
          start: start
          end: end
          enabled: true
        email:
          severity_filter:
          - critical
          - critical
          enabled: true
    Team:
      required:
      - id
      - name
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        manager_id:
          type: string
        manager_name:
          type: string
        member_count:
          type: integer
        members:
          type: array
          items:
            $ref: "#/components/schemas/Team_members"
        notification_settings:
          $ref: "#/components/schemas/Team_notification_settings"
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      example:
        manager_name: manager_name
        updated_at: 2000-01-23T04:56:07.000+00:00
        manager_id: manager_id
        notification_settings:
          escalation_contact: escalation_contact
          primary_contact: primary_contact
        members:
        - role: role
          name: name
          id: id
        - role: role
          name: name
          id: id
        name: name
        description: description
        created_at: 2000-01-23T04:56:07.000+00:00
        id: id
        member_count: 0
    TeamList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/Team"
        total:
          type: integer
      example:
        total: 6
        items:
        - manager_name: manager_name
          updated_at: 2000-01-23T04:56:07.000+00:00
          manager_id: manager_id
          notification_settings:
            escalation_contact: escalation_contact
            primary_contact: primary_contact
          members:
          - role: role
            name: name
            id: id
          - role: role
            name: name
            id: id
          name: name
          description: description
          created_at: 2000-01-23T04:56:07.000+00:00
          id: id
          member_count: 0
        - manager_name: manager_name
          updated_at: 2000-01-23T04:56:07.000+00:00
          manager_id: manager_id
          notification_settings:
            escalation_contact: escalation_contact
            primary_contact: primary_contact
          members:
          - role: role
            name: name
            id: id
          - role: role
            name: name
            id: id
          name: name
          description: description
          created_at: 2000-01-23T04:56:07.000+00:00
          id: id
          member_count: 0
    TeamCreateRequest:
      required:
      - name
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        manager_id:
          type: string
        member_ids:
          type: array
          items:
            type: string
        notification_settings:
          type: object
    TeamUpdateRequest:
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        manager_id:
          type: string
        notification_settings:
          type: object
    NotificationChannel:
      required:
      - enabled
      - id
      - name
      - type
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        type:
          type: string
          enum:
          - email
          - webhook
          - slack
          - line
          - sms
        enabled:
          type: boolean
        configuration:
          $ref: "#/components/schemas/NotificationChannel_configuration"
        test_status:
          $ref: "#/components/schemas/NotificationChannel_test_status"
        created_at:
          type: string
          format: date-time
        updated_at:
          type: string
          format: date-time
      example:
        test_status:
          success: true
          last_test: 2000-01-23T04:56:07.000+00:00
          message: message
        updated_at: 2000-01-23T04:56:07.000+00:00
        configuration:
          headers: {}
          method: method
          webhook_url: webhook_url
          channel: channel
          smtp_from: smtp_from
          smtp_host: smtp_host
          url: url
          sender_id: sender_id
          smtp_username: smtp_username
          mention: mention
          access_token: access_token
          api_endpoint: api_endpoint
          smtp_port: 0
          api_key: api_key
        name: name
        created_at: 2000-01-23T04:56:07.000+00:00
        id: id
        type: email
        enabled: true
    NotificationChannelList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/NotificationChannel"
        total:
          type: integer
      example:
        total: 6
        items:
        - test_status:
            success: true
            last_test: 2000-01-23T04:56:07.000+00:00
            message: message
          updated_at: 2000-01-23T04:56:07.000+00:00
          configuration:
            headers: {}
            method: method
            webhook_url: webhook_url
            channel: channel
            smtp_from: smtp_from
            smtp_host: smtp_host
            url: url
            sender_id: sender_id
            smtp_username: smtp_username
            mention: mention
            access_token: access_token
            api_endpoint: api_endpoint
            smtp_port: 0
            api_key: api_key
          name: name
          created_at: 2000-01-23T04:56:07.000+00:00
          id: id
          type: email
          enabled: true
        - test_status:
            success: true
            last_test: 2000-01-23T04:56:07.000+00:00
            message: message
          updated_at: 2000-01-23T04:56:07.000+00:00
          configuration:
            headers: {}
            method: method
            webhook_url: webhook_url
            channel: channel
            smtp_from: smtp_from
            smtp_host: smtp_host
            url: url
            sender_id: sender_id
            smtp_username: smtp_username
            mention: mention
            access_token: access_token
            api_endpoint: api_endpoint
            smtp_port: 0
            api_key: api_key
          name: name
          created_at: 2000-01-23T04:56:07.000+00:00
          id: id
          type: email
          enabled: true
    NotificationChannelCreateRequest:
      required:
      - configuration
      - name
      - type
      type: object
      properties:
        name:
          type: string
        type:
          type: string
          enum:
          - email
          - webhook
          - slack
          - line
          - sms
        configuration:
          type: object
        enabled:
          type: boolean
          default: true
    NotificationChannelUpdateRequest:
      type: object
      properties:
        name:
          type: string
        configuration:
          type: object
        enabled:
          type: boolean
    SystemSettings:
      type: object
      properties:
        general:
          $ref: "#/components/schemas/SystemSettings_general"
        integration:
          $ref: "#/components/schemas/SystemSettings_integration"
        notification:
          $ref: "#/components/schemas/SystemSettings_notification"
        maintenance:
          $ref: "#/components/schemas/SystemSettings_maintenance"
      example:
        general:
          site_name: site_name
          site_url: site_url
          language: zh-TW
          time_zone: time_zone
        notification:
          retry_delay: 6
          retry_count: 0
          default_channel: default_channel
        integration:
          keycloak_url: keycloak_url
          prometheus_url: prometheus_url
          grafana_url: grafana_url
          loki_url: loki_url
        maintenance:
          auto_acknowledge: true
          default_assignee: default_assignee
          auto_resolve: true
    MaintenanceWindow:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        description:
          type: string
        start_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
        recurring:
          type: boolean
        recurrence_pattern:
          type: string
          enum:
          - daily
          - weekly
          - monthly
        affected_resources:
          type: array
          items:
            type: string
        created_by:
          type: string
        created_at:
          type: string
          format: date-time
      example:
        start_time: 2000-01-23T04:56:07.000+00:00
        recurrence_pattern: daily
        recurring: true
        name: name
        end_time: 2000-01-23T04:56:07.000+00:00
        affected_resources:
        - affected_resources
        - affected_resources
        description: description
        created_at: 2000-01-23T04:56:07.000+00:00
        id: id
        created_by: created_by
    MaintenanceWindowList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/MaintenanceWindow"
        total:
          type: integer
      example:
        total: 0
        items:
        - start_time: 2000-01-23T04:56:07.000+00:00
          recurrence_pattern: daily
          recurring: true
          name: name
          end_time: 2000-01-23T04:56:07.000+00:00
          affected_resources:
          - affected_resources
          - affected_resources
          description: description
          created_at: 2000-01-23T04:56:07.000+00:00
          id: id
          created_by: created_by
        - start_time: 2000-01-23T04:56:07.000+00:00
          recurrence_pattern: daily
          recurring: true
          name: name
          end_time: 2000-01-23T04:56:07.000+00:00
          affected_resources:
          - affected_resources
          - affected_resources
          description: description
          created_at: 2000-01-23T04:56:07.000+00:00
          id: id
          created_by: created_by
    MaintenanceWindowCreateRequest:
      required:
      - end_time
      - name
      - start_time
      type: object
      properties:
        name:
          type: string
        description:
          type: string
        start_time:
          type: string
          format: date-time
        end_time:
          type: string
          format: date-time
        recurring:
          type: boolean
        recurrence_pattern:
          type: string
          enum:
          - daily
          - weekly
          - monthly
        affected_resources:
          type: array
          items:
            type: string
    AuditLog:
      type: object
      properties:
        id:
          type: string
        timestamp:
          type: string
          format: date-time
        user_id:
          type: string
        username:
          type: string
        action:
          type: string
          enum:
          - create
          - update
          - delete
          - execute
          - login
          - logout
        resource_type:
          type: string
        resource_id:
          type: string
        resource_name:
          type: string
        changes:
          $ref: "#/components/schemas/AuditLog_changes"
        result:
          type: string
          enum:
          - success
          - failure
        error_message:
          type: string
        ip_address:
          type: string
        user_agent:
          type: string
      example:
        error_message: error_message
        resource_type: resource_type
        changes:
          before: {}
          after: {}
        ip_address: ip_address
        result: success
        user_id: user_id
        action: create
        resource_id: resource_id
        id: id
        resource_name: resource_name
        user_agent: user_agent
        timestamp: 2000-01-23T04:56:07.000+00:00
        username: username
    AuditLogList:
      type: object
      properties:
        items:
          type: array
          items:
            $ref: "#/components/schemas/AuditLog"
        pagination:
          $ref: "#/components/schemas/Pagination"
      example:
        pagination:
          total: 7
          page: 5
          total_pages: 9
          page_size: 2
        items:
        - error_message: error_message
          resource_type: resource_type
          changes:
            before: {}
            after: {}
          ip_address: ip_address
          result: success
          user_id: user_id
          action: create
          resource_id: resource_id
          id: id
          resource_name: resource_name
          user_agent: user_agent
          timestamp: 2000-01-23T04:56:07.000+00:00
          username: username
        - error_message: error_message
          resource_type: resource_type
          changes:
            before: {}
            after: {}
          ip_address: ip_address
          result: success
          user_id: user_id
          action: create
          resource_id: resource_id
          id: id
          resource_name: resource_name
          user_agent: user_agent
          timestamp: 2000-01-23T04:56:07.000+00:00
          username: username
    incidentId_acknowledge_body:
      type: object
      properties:
        acknowledged_by:
          type: string
          description: 確認人
        comment:
          type: string
          description: 確認備註
    incidentId_resolve_body:
      type: object
      properties:
        resolved_by:
          type: string
          description: 解決人
        resolution:
          type: string
          description: 解決方案描述
        root_cause:
          type: string
          description: 根本原因
    incidentId_assign_body:
      required:
      - assignee_id
      type: object
      properties:
        assignee_id:
          type: string
          description: 被指派人 ID
    incidentId_comments_body:
      required:
      - comment
      type: object
      properties:
        comment:
          type: string
          description: 註記內容
    incidents_generatereport_body:
      required:
      - incident_ids
      type: object
      properties:
        incident_ids:
          type: array
          description: 要分析的事件 ID 列表
          items:
            type: string
        report_type:
          type: string
          default: summary
          enum:
          - summary
          - root_cause
          - impact_analysis
    inline_response_200:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
        matched_resources:
          type: array
          items:
            type: string
      example:
        matched_resources:
        - matched_resources
        - matched_resources
        success: true
        message: message
    inline_response_200_1:
      type: object
      properties:
        alerts:
          type: array
          items:
            $ref: "#/components/schemas/inline_response_200_1_alerts"
        total:
          type: integer
        firing_count:
          type: integer
        resolved_count:
          type: integer
      example:
        alerts:
        - severity: P0
          resolved_at: 2000-01-23T04:56:07.000+00:00
          name: name
          fired_at: 2000-01-23T04:56:07.000+00:00
          id: id
          resource_name: resource_name
          message: message
          status: firing
        - severity: P0
          resolved_at: 2000-01-23T04:56:07.000+00:00
          name: name
          fired_at: 2000-01-23T04:56:07.000+00:00
          id: id
          resource_name: resource_name
          message: message
          status: firing
        total: 0
        firing_count: 6
        resolved_count: 1
    profile_changepassword_body:
      required:
      - current_password
      - new_password
      type: object
      properties:
        current_password:
          type: string
          format: password
        new_password:
          type: string
          format: password
    profile_verifycontact_body:
      required:
      - method
      - value
      type: object
      properties:
        method:
          type: string
          enum:
          - email
          - sms
          - line
        value:
          type: string
          description: 聯絡方式的值（如 email 地址、手機號碼）
        verification_code:
          type: string
          description: 驗證碼（如果是驗證步驟）
    teamId_members_body:
      required:
      - operation
      - user_ids
      type: object
      properties:
        operation:
          type: string
          enum:
          - add
          - remove
        user_ids:
          type: array
          items:
            type: string
    channelId_test_body:
      type: object
      properties:
        message:
          type: string
          default: 這是一則測試訊息
    inline_response_200_2:
      type: object
      properties:
        success:
          type: boolean
        message:
          type: string
      example:
        success: true
        message: message
    callbacks_diagnosiscomplete_body:
      type: object
      properties:
        session_id:
          type: string
          format: uuid
        status:
          type: string
          enum:
          - completed
          - failed
        result_url:
          type: string
          format: uri
    ReadinessStatus_checks:
      type: object
      properties:
        database:
          type: boolean
        redis:
          type: boolean
        keycloak:
          type: boolean
        sre_assistant:
          type: boolean
      example:
        database: true
        keycloak: true
        sre_assistant: true
        redis: true
    DashboardSummary_alerts:
      type: object
      properties:
        new:
          type: integer
        processing:
          type: integer
        resolved_today:
          type: integer
      example:
        new: 0
        resolved_today: 1
        processing: 6
    DashboardSummary_resources:
      type: object
      properties:
        total:
          type: integer
        healthy:
          type: integer
        warning:
          type: integer
        critical:
          type: integer
      example:
        total: 5
        critical: 7
        healthy: 5
        warning: 2
    DashboardSummary_kpis:
      type: object
      properties:
        availability:
          type: number
          description: 系統可用性百分比
          format: float
        mttr:
          type: number
          description: 平均修復時間（分鐘）
        incident_rate:
          type: number
          description: 事件發生率
      example:
        mttr: 3.616076749251911
        incident_rate: 2.027123023002322
        availability: 9.301444
    TrendData_data_points:
      type: object
      properties:
        timestamp:
          type: string
          format: date-time
        alerts:
          type: integer
        incidents:
          type: integer
        resources_healthy:
          type: integer
        resources_unhealthy:
          type: integer
      example:
        alerts: 0
        resources_unhealthy: 5
        incidents: 6
        resources_healthy: 1
        timestamp: 2000-01-23T04:56:07.000+00:00
    ResourceDistribution_by_status:
      type: object
      properties:
        healthy:
          type: integer
        warning:
          type: integer
        critical:
          type: integer
        unknown:
          type: integer
      example:
        critical: 1
        healthy: 0
        warning: 6
        unknown: 5
    ResourceDistribution_by_group:
      type: object
      properties:
        group_id:
          type: string
        group_name:
          type: string
        total:
          type: integer
        healthy:
          type: integer
        warning:
          type: integer
        critical:
          type: integer
      example:
        total: 2
        critical: 3
        group_id: group_id
        group_name: group_name
        healthy: 7
        warning: 9
    Resource_metrics:
      type: object
      properties:
        cpu_usage:
          type: number
          format: float
        memory_usage:
          type: number
          format: float
        disk_usage:
          type: number
          format: float
        network_io:
          type: number
          format: float
      example:
        memory_usage: 6.0274563
        disk_usage: 1.4658129
        network_io: 5.962134
        cpu_usage: 0.8008282
    BatchResourceOperation_parameters:
      type: object
      properties:
        group_id:
          type: string
        tags:
          type: array
          items:
            type: string
    BatchOperationResult_failures:
      type: object
      properties:
        resource_id:
          type: string
        error:
          type: string
      example:
        resource_id: resource_id
        error: error
    ScanResult_discovered_resources:
      type: object
      properties:
        ip_address:
          type: string
        hostname:
          type: string
        open_ports:
          type: array
          items:
            type: integer
        os_detection:
          type: string
        services:
          type: array
          items:
            type: string
      example:
        os_detection: os_detection
        hostname: hostname
        open_ports:
        - 0
        - 0
        ip_address: ip_address
        services:
        - services
        - services
    ResourceGroup_status_summary:
      type: object
      properties:
        healthy:
          type: integer
        warning:
          type: integer
        critical:
          type: integer
      example:
        critical: 5
        healthy: 6
        warning: 1
    DiagnosticResult_findings:
      type: object
      properties:
        source:
          type: string
        severity:
          type: string
          enum:
          - critical
          - warning
          - info
        message:
          type: string
        evidence:
          type: object
        timestamp:
          type: string
          format: date-time
    DiagnosticHistoryList_items:
      type: object
      properties:
        session_id:
          type: string
        incident_id:
          type: string
        status:
          type: string
        created_at:
          type: string
          format: date-time
        completed_at:
          type: string
          format: date-time
        summary:
          type: string
    CapacityAnalysisResponse_current_usage:
      type: object
      properties:
        average:
          type: number
        peak:
          type: number
        percentile_95:
          type: number
    CapacityAnalysisResponse_forecast_capacity_alerts:
      type: object
      properties:
        alert_type:
          type: string
        threshold:
          type: string
        estimated_date:
          type: string
          format: date-time
        days_remaining:
          type: integer
        severity:
          type: string
    CapacityAnalysisResponse_forecast:
      type: object
      properties:
        trend:
          type: string
          enum:
          - increasing
          - stable
          - decreasing
        days_to_capacity:
          type: integer
          description: 預測多少天後達到容量上限
        growth_rate:
          type: number
          description: 月增長率百分比
        capacity_alerts:
          type: array
          items:
            $ref: "#/components/schemas/CapacityAnalysisResponse_forecast_capacity_alerts"
    CapacityAnalysisResponse_cost_impact:
      type: object
      properties:
        monthly_increase:
          type: number
        currency:
          type: string
          default: USD
    CapacityAnalysisResponse_recommendations:
      type: object
      properties:
        type:
          type: string
          enum:
          - scale_up
          - scale_down
          - optimize
        resource:
          type: string
        priority:
          type: string
          enum:
          - immediate
          - high
          - medium
          - low
        current_allocation:
          type: number
        recommended_allocation:
          type: number
        reasoning:
          type: string
        cost_impact:
          $ref: "#/components/schemas/CapacityAnalysisResponse_cost_impact"
    CapacityAnalysisResponse_chart_data:
      type: object
      properties:
        date:
          type: string
          format: date
        historical:
          type: number
        predicted:
          type: number
    Incident_comments:
      type: object
      properties:
        id:
          type: string
        user:
          type: string
        comment:
          type: string
        created_at:
          type: string
          format: date-time
      example:
        created_at: 2000-01-23T04:56:07.000+00:00
        comment: comment
        id: id
        user: user
    AlertRule_condition:
      type: object
      properties:
        metric:
          type: string
        operator:
          type: string
          enum:
          - gt
          - gte
          - lt
          - lte
          - eq
          - neq
        threshold:
          type: number
        duration:
          type: integer
          description: 持續時間（秒）
      example:
        duration: 6
        metric: metric
        threshold: 0.8008281904610115
        operator: gt
    AlertRule_resource_filter:
      type: object
      properties:
        groups:
          type: array
          items:
            type: string
        types:
          type: array
          items:
            type: string
        tags:
          type: array
          items:
            type: string
      example:
        types:
        - types
        - types
        groups:
        - groups
        - groups
        tags:
        - tags
        - tags
    AlertRuleCreateRequest_condition:
      required:
      - metric
      - operator
      - threshold
      type: object
      properties:
        metric:
          type: string
        operator:
          type: string
          enum:
          - gt
          - gte
          - lt
          - lte
          - eq
          - neq
        threshold:
          type: number
        duration:
          type: integer
    Script_parameters:
      type: object
      properties:
        name:
          type: string
        type:
          type: string
          enum:
          - string
          - number
          - boolean
          - array
          - object
        required:
          type: boolean
        default:
          description: 參數的預設值（可以是任何類型）
          oneOf:
          - type: string
          - type: number
          - type: boolean
          - type: array
            items: {}
          - type: object
        description:
          type: string
      example:
        default: ""
        name: name
        description: description
        type: string
        required: true
    User_teams:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
      example:
        name: name
        id: id
    NotificationPreferences_email:
      type: object
      properties:
        enabled:
          type: boolean
        severity_filter:
          type: array
          items:
            type: string
            enum:
            - critical
            - error
            - warning
            - info
      example:
        severity_filter:
        - critical
        - critical
        enabled: true
    NotificationPreferences_sms:
      type: object
      properties:
        enabled:
          type: boolean
        severity_filter:
          type: array
          items:
            type: string
      example:
        severity_filter:
        - severity_filter
        - severity_filter
        enabled: true
    NotificationPreferences_quiet_hours:
      type: object
      properties:
        enabled:
          type: boolean
        start:
          type: string
          format: time
        end:
          type: string
          format: time
      example:
        start: start
        end: end
        enabled: true
    Team_members:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        role:
          type: string
      example:
        role: role
        name: name
        id: id
    Team_notification_settings:
      type: object
      properties:
        primary_contact:
          type: string
        escalation_contact:
          type: string
      example:
        escalation_contact: escalation_contact
        primary_contact: primary_contact
    NotificationChannel_configuration:
      type: object
      properties:
        smtp_host:
          type: string
        smtp_port:
          type: integer
        smtp_username:
          type: string
        smtp_from:
          type: string
        url:
          type: string
        method:
          type: string
        headers:
          type: object
        webhook_url:
          type: string
        channel:
          type: string
        mention:
          type: string
        access_token:
          type: string
        api_endpoint:
          type: string
        api_key:
          type: string
        sender_id:
          type: string
      description: 管道特定的配置
      example:
        headers: {}
        method: method
        webhook_url: webhook_url
        channel: channel
        smtp_from: smtp_from
        smtp_host: smtp_host
        url: url
        sender_id: sender_id
        smtp_username: smtp_username
        mention: mention
        access_token: access_token
        api_endpoint: api_endpoint
        smtp_port: 0
        api_key: api_key
    NotificationChannel_test_status:
      type: object
      properties:
        last_test:
          type: string
          format: date-time
        success:
          type: boolean
        message:
          type: string
      example:
        success: true
        last_test: 2000-01-23T04:56:07.000+00:00
        message: message
    SystemSettings_general:
      type: object
      properties:
        site_name:
          type: string
        site_url:
          type: string
        time_zone:
          type: string
        language:
          type: string
          enum:
          - zh-TW
          - zh-CN
          - en-US
      example:
        site_name: site_name
        site_url: site_url
        language: zh-TW
        time_zone: time_zone
    SystemSettings_integration:
      type: object
      properties:
        grafana_url:
          type: string
        prometheus_url:
          type: string
        loki_url:
          type: string
        keycloak_url:
          type: string
      example:
        keycloak_url: keycloak_url
        prometheus_url: prometheus_url
        grafana_url: grafana_url
        loki_url: loki_url
    SystemSettings_notification:
      type: object
      properties:
        default_channel:
          type: string
        retry_count:
          type: integer
        retry_delay:
          type: integer
      example:
        retry_delay: 6
        retry_count: 0
        default_channel: default_channel
    SystemSettings_maintenance:
      type: object
      properties:
        auto_acknowledge:
          type: boolean
        auto_resolve:
          type: boolean
        default_assignee:
          type: string
      example:
        auto_acknowledge: true
        default_assignee: default_assignee
        auto_resolve: true
    AuditLog_changes:
      type: object
      properties:
        before:
          type: object
        after:
          type: object
      example:
        before: {}
        after: {}
    inline_response_200_1_alerts:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        severity:
          type: string
          enum:
          - P0
          - P1
          - P2
          - P3
        status:
          type: string
          enum:
          - firing
          - resolved
          - pending
        resource_name:
          type: string
        message:
          type: string
        fired_at:
          type: string
          format: date-time
        resolved_at:
          type: string
          format: date-time
      example:
        severity: P0
        resolved_at: 2000-01-23T04:56:07.000+00:00
        name: name
        fired_at: 2000-01-23T04:56:07.000+00:00
        id: id
        resource_name: resource_name
        message: message
        status: firing
  responses:
    BadRequest:
      description: 請求參數錯誤
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
    Unauthorized:
      description: 未授權
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
    Forbidden:
      description: 無權限
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
    NotFound:
      description: 資源不存在
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
    Conflict:
      description: 資源衝突
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
    InternalServerError:
      description: 內部伺服器錯誤
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorResponse"
  parameters:
    PageParam:
      name: page
      in: query
      description: 頁碼（從 1 開始）
      required: false
      style: form
      explode: true
      schema:
        minimum: 1
        type: integer
        default: 1
    PageSizeParam:
      name: page_size
      in: query
      description: 每頁筆數
      required: false
      style: form
      explode: true
      schema:
        maximum: 100
        minimum: 1
        type: integer
        default: 20
    ResourceIdParam:
      name: resourceId
      in: path
      description: 資源 ID
      required: true
      style: simple
      explode: false
      schema:
        type: string
  securitySchemes:
    bearerAuth:
      type: http
      description: Keycloak JWT Token
      scheme: bearer
      bearerFormat: JWT
