# 代理人指南 (Agents Companion)

https://drive.google.com/file/d/1GVPdwEh48bErTNdhxD0vqxPAifSx1I6Y/view

**作者: Antonio Gulli, Lavi Nigam,**

**Julia Wiesinger, Vladimir Vuskovic,**

**Irina Sigler, Ivan Nardini, Nicolas Stroppa,**

**Sokratis Kartakis, Narek Saribekyan,**

**Anant Nawalgaria, and Alan Bount**
代理人指南 (Agents Companion)

**致謝**

**編輯與策展人** Anant Nawalgaria

**內容貢獻者** Steven Johnson
Hussain Chinoy

**設計師**

Michael Lanning

2025年2月 2日
**目錄**

本文件中提供的目錄如下：

* **引言** (第 6 頁)
* **代理操作 (AgentOps)** (第 8 頁)
* **代理成功指標** (第 12 頁)
* **代理評估** (第 14 頁)
* **評估代理能力** (第 15 頁)
* **評估軌跡和工具使用** (第 17 頁)
* **評估最終回應** (第 20 頁)
* **人為參與評估 (Human-in-the-Loop Evaluation)** (第 21 頁)
* **更多關於代理評估的資訊** (第 22 頁)
* **多個代理及其評估** (第 23 頁)
* **理解多代理架構** (第 24 頁)
* **多代理設計模式及其商業影響** (第 25 頁)
* **代理的重要組成部分** (第 28 頁)
* **多代理系統的挑戰** (第 31 頁)
* **多代理評估** (第 32 頁)
* **代理式 RAG：檢索增強生成中的關鍵演進** (第 33 頁)
* **代理式 RAG 及其重要性** (第 34 頁)
* **更好的搜尋，更好的 RAG** (第 36 頁)
* **企業中的代理** (第 38 頁)
* **代理管理器** (第 38 頁)
* **Google Agentspace** (第 40 頁)
* **NotebookLM 企業版** (第 41 頁)
* **Google AgentSpace 企業版** (第 43 頁)
* **從代理到承包商** (第 46 頁)
* **合約** (第 46 頁)
* **合約生命週期** (第 49 頁)
* **合約執行** (第 49 頁)
* **合約談判** (第 50 頁)
* **合約回饋** (第 51 頁)
* **分包合約** (第 51 頁)
* **汽車人工智慧：多代理架構的實際應用** (第 54 頁)
* **專門代理** (第 54 頁)
* **對話式導航代理** (第 54 頁)
* **對話式媒體搜尋代理** (第 55 頁)
* **訊息撰寫代理** (第 56 頁)
* **汽車手冊代理** (第 57 頁)
* **一般知識代理** (第 57 頁)
* **使用中的模式** (第 58 頁)
* **階層式模式** (第 58 頁)
* **鑽石模式** (第 60 頁)
* **點對點模式** (第 62 頁)
* **協作模式** (第 63 頁)
* **回應混合代理** (第 65 頁)
* **自適應循環模式** (第 67 頁)
* **多代理架構對汽車人工智慧的優勢** (第 68 頁)
* **代理建構器** (第 69 頁)
* **摘要** (第 70 頁)
* **註釋** (第 74 頁)


AI 的未來是代理式的 (agentic)。

**簡介**

生成式 AI 代理人標誌著從傳統的、獨立的語言模型向前邁出的一大步，為解決問題和互動提供了一種動態的方法。正如最初的代理人論文所定義的，代理人 (agent) 是一種應用程式，旨在透過感知其環境並利用其可用的工具策略性地對其採取行動來實現特定目標。代理人的基本原則在於其對推理、邏輯和外部資訊存取的綜合，使其能夠執行超出底層模型固有能力的任務和決策。這些代理人具有自主操作的能力，獨立追求其目標並主動確定後續行動，通常無需明確的指示。

2025年2月 6日
代理人指南 (Agents Companion)

代理人的架構由三個驅動其行為和決策的必要元素組成：

• **模型 (Model):** 在代理人的框架內，「模型」一詞指的是作為中央決策單元的語言模型 (Language Model, LM)，它採用基於指令的推理和邏輯框架。根據代理人的具體要求，模型可以從通用型到多模態或微調型不等。

• **工具 (Tools):** 工具對於彌合代理人內部能力與外部世界之間的鴻溝至關重要，它促進了與外部數據和服務的互動。這些工具使代理人能夠存取和處理真實世界的資訊。工具可以包括擴充功能、函式和數據儲存。擴充功能彌合了 API 和代理人之間的差距，使代理人能夠無縫地執行 API。函式是完成特定任務的自包含程式碼模組。數據儲存提供對動態和最新資訊的存取，確保模型的回應始終基於事實和相關性。

• **協調層 (Orchestration layer):** 協調層是一個循環過程，它決定了代理人如何吸收資訊、進行內部推理，並利用該推理來通知其後續的行動或決策。該層負責維護記憶、狀態、推理和規劃。它採用提示工程框架來引導推理和規劃，促進與環境更有效的互動和任務完成。諸如 ReAct、思維鏈 (Chain-of-Thought, CoT) 和思維樹 (Tree-of-Thoughts, ToT) 等推理技術可以在該層內應用。

基於這些基礎概念，本指南專為開發人員設計，作為更進階主題的「102」指南。它深入探討了代理人評估方法論，以及 Google 代理人產品在增強代理人解決複雜、真實世界問題能力方面的實際應用。

2025年2月 7日
代理人指南 (Agents Companion)

在探索這些理論概念的同時，我們將檢視它們如何在真實世界的實作中體現，特別是將汽車 AI 作為一個引人注目的案例研究。汽車領域例證了在生產環境中多代理人架構的挑戰與機遇。現代車輛需要能夠在有或沒有連接的情況下運作的對話式介面，在設備端和雲端處理之間取得平衡以兼顧安全性和使用者體驗，並在導航、媒體控制、訊息傳遞和車輛系統之間無縫協調專業能力。透過這個汽車領域的視角，我們將看到不同的協調模式——分層、協作和點對點——如何共同在具有顯著限制的環境中創造出強大、響應迅速的使用者體驗。這個案例研究說明了多代理人系統的實際應用，各行各業的企業都可以根據其特定領域進行調整。

任何曾經使用生成式 AI 進行建構的人很快就會意識到，從一個想法到一個概念驗證 (proof-of-concept) 很容易，但要確保高品質的結果並投入生產可能相當困難——生成式 AI 代理人也不例外。品質和可靠性是部署到生產環境中最常被提及的擔憂，而「代理人維運 (AgentOps)」流程是優化代理人建構的解決方案。

**代理人維運 (AgentOps)**

在過去的兩年中，生成式 AI (Generative AI, GenAI) 領域發生了重大變化，企業客戶專注於如何將相關解決方案投入運營。這導致了描述 GenAI 運營化的各種術語，例如 GenAI 的 MLOps、LLMOps、FMOps 和 GenAIOps。

代理人與營運 (Agent and Operations, AgentOps) 是 GenAIOps 的一個子類別，專注於代理人的高效營運化。其主要附加組件包括內部和外部工具管理、代理人大腦提示（目標、設定檔、指令）和協調、記憶體以及任務分解。

2025年2月 8日
代理人指南 (Agents Companion)

![][image1]
圖 1. DevOps、MLOps 和 AgentOps 之間的關係。13

每個「Ops」都需要版本控制、透過 CI/CD 的自動化部署、測試、日誌記錄、安全以及（至關重要的）指標等能力。每個系統通常都會根據指標實施某種形式的優化——衡量您的系統正在做什麼和沒做什麼，衡量結果和業務指標，並自動化流程以獲得更全面的指標，並逐步改進。這種做法可能被稱為「A/B 實驗」或「ML Ops」或「指標驅動開發」，但它們都源於相同的總體方法，我們也將在 AgentOps 中依賴這些原則。

請記住，新的實踐並不會取代舊的。DevOps 和 MLOps 的最佳實踐對於 AgentOps 仍然是必要的，因為它們是依賴項。例如，代理人工具的使用，其中 API 是基於代理人協調來調用的，通常會使用您在非代理人軟體中會調用的相同 API。

2025年2月 9日
代理人指南 (Agents Companion)

身份驗證和秘密管理、安全性、隱私、異常處理、節流、配額和可擴展性仍然至關重要，除了代理人設計之外，還需要仔細的 API 設計。

讓我們來定義這些「ops」術語，以幫助區分它們：

• **開發與維運 (Development and Operations, DevOps)** 是透過整合人員、流程和技術的元素，有效地將確定性軟體應用程式產品化的實踐。DevOps 是以下所有術語的基礎。

• **機器學習維運 (Machine Learning Operations, MLOps)** 建立在 DevOps 的能力之上，並專注於機器學習模型的高效產品化。主要區別在於機器學習模型的輸出是非確定性的，並且依賴於輸入數據（垃圾進，垃圾出）。

• **基礎模型維運 (Foundation Model Operations, FMOps)** 擴展了 MLOps 的能力，專注於預訓練（從頭開始訓練）或客製化（微調）的基礎模型 (Foundation Models, FM) 的高效產品化。

• **提示與維運 (Prompt and Operations, PromptOps)** 是 GenAIOps 的一個子類別，專注於有效地營運化提示。其主要附加功能包括提示儲存、血緣關係、元數據管理（包括評估分數）、一個集中的提示模板註冊表和一個提示優化器。

• **RAG 與維運 (RAG and Operations, RAGOps)** 是 GenAIOps 的一個子類別，專注於高效地營運化 RAG 解決方案。其主要附加功能包括透過離線數據準備（包括清理、分塊、向量化、相似性搜索和重新排序）的檢索過程，以及透過提示增強和 grounding 的生成過程。

2025年2月 10日
代理人指南 (Agents Companion)

• **代理人與維運 (Agent and Operations, AgentOps)** 是 GenAIOps 的一個子類別，專注於代理人的高效營運化。其主要附加組件包括內部和外部工具管理、代理人大腦提示（目標、設定檔、指令）和協調、記憶體以及任務分解。

![][image2]圖 2. 每個「Ops」都是關於技術、流程和人員的14

所有這些「Ops」本質上都是人員、流程和技術的和諧融合，共同致力於將機器學習解決方案高效地部署到即時生產環境中。認識到 Ops 超越了單純的技術至關重要；它不僅僅是建構和交付一個機器學習管線。成功的 Ops 實施會更深入地考慮客戶的營運模式、他們現有的業務單位以及他們的整體組織結構。這種全面的方法確保技術能夠根據他們的特定需求量身定制，無縫地整合到業務中並最大化價值。

2025年2月 11日
代理人指南 (Agents Companion)

下一節將詳細介紹代理人評估，這是 AgentOps 和自動化捕獲有用指標故事的重要組成部分。在此之前，讓我們從一個思想實驗開始；想像一下在生產環境中為您的新代理人設置 A/B 實驗。實驗組獲得您的新代理人，而對照組則沒有。在這種情況下，您要測量哪些指標來確定實驗組是否做得更好？您要測量哪些指標來確定專案的投資回報率？是完成一個目標、銷售總額，還是一系列關鍵的用戶旅程步驟？除了更詳細的代理人評估指標外，還必須理解、檢測和輕鬆分析這些指標。

**代理人成功指標**

指標對於建構、監控和比較代理人的修訂版本至關重要。業務指標，如收入或用戶參與度，可能超出了代理人本身的範圍，但這些應該是您代理人的**北極星指標**。

大多數代理人都是圍繞完成目標而設計的，因此**目標完成率**是要追蹤的關鍵指標。同樣，一個目標可能會被分解為一些關鍵任務或關鍵用戶互動。每個關鍵任務和互動都應獨立檢測和測量。

因此，在我們深入了解代理人本身的細節之前，我們已經確定了幾個指標，您應該能夠在儀表板上輕鬆追蹤。每個業務指標、目標或關鍵互動都將以熟悉的方式匯總：嘗試次數、成功次數、比率等。此外，您可以從任何應用程式遙測系統中獲得的指標對於追蹤代理人也非常重要，例如延遲、錯誤等指標。

2025年2月 12日
代理人指南 (Agents Companion)

這些指標都不是代理人特有的，您可以為任何軟體追蹤它們，但對於代理人建構者來說，它們甚至更重要。確定性程式碼只會執行您告訴它執行的操作，而代理人可以做更多的事情，它依賴於在大量數據上訓練的 LLM。檢測這些高層次指標是可觀測性的重要組成部分。您可以將它們視為代理人的關鍵績效指標 (Key Performance Indicators, KPI)，它們允許從宏觀上觀察您的代理人，提供一個更高層次的視角。

人類回饋也是要追蹤的更關鍵的指標之一。在代理人或任務的背景下，一個簡單的 ���� 或用戶回饋表單，對於了解您的代理人在哪些方面做得好，哪些方面需要改進大有幫助。這種回饋可以來自消費者系統的終端用戶，也可以來自審查代理人的員工、QA 測試人員以及流程或領域專家。

更詳細的可觀測性對於代理人建構也非常重要，能夠看到和理解代理人正在做什麼以及為什麼這樣做。代理人可以被檢測以「追蹤」來記錄代理人的所有內部運作，而不僅僅是至關重要的任務和用戶互動。您*可以*在概念上將每個內部步驟作為指標來衡量，但這很少見。相反，當指標或手動測試顯示問題時，這些詳細的追蹤被用來除錯代理人，您可以深入細節，看看出了什麼問題。

2025年2月 13日
代理人指南 (Agents Companion)

![][image3]
圖 3：一個雲端可觀測性範例，顯示了一個帶有工具和 LLM OpenTelemetry 跨度 (spans) 的代理人的追蹤。15

到目前為止，我們一直在討論業務指標、目標、任務、人類回饋和追蹤——這些都是在生產中理解您的代理人行為和影響的方式。在開發代理人時，除了手動測試外，自動化測試從長遠來看將更有效率，並能更深入地了解代理人的行為。

**代理人評估 (Agent Evaluation)**

為了彌合概念驗證和可投入生產的 AI 代理人之間的差距，一個強大且自動化的評估框架至關重要。與評估生成模型（主要關注最終輸出）不同，代理人評估需要更深入地理解決策過程。代理人評估可以分解為我們在本章中討論的三個組成部分：

1. **評估代理人能力 (Assessing Agent Capabilities):** 評估代理人的核心能力，例如其理解指令和進行邏輯推理的能力。

2025年2月 14日
代理人指南 (Agents Companion)

2. **評估軌跡與工具使用 (Evaluating Trajectory and Tool Use):** 分析代理人為達成解決方案所採取的步驟，包括其工具選擇、策略及其方法的效率。

3. **評估最終回應 (Evaluating the Final Response):** 評估代理人最終輸出的品質、相關性和正確性。

**評估代理人能力**

在評估您的特定代理人使用案例之前，公開可用的基準測試和技術報告可以提供對核心能力和限制的洞察，以便在建構您的代理人使用案例時加以考慮。對於大多數基本的代理人能力，如模型性能、幻覺、工具呼叫和規劃，都存在公開的基準測試。例如，工具呼叫，即選擇和使用適當工具的能力，由像柏克萊函式呼叫排行榜 (Berkeley Function-Calling Leaderboard, BFCL)16 和 τ-bench17 這樣的基準測試來展示，後者還概述了常見的錯誤。另一個例子，PlanBench18 旨在評估跨多個領域和特定能力的規劃和推理。

但是工具呼叫和規劃並不是您應該考慮的唯一能力。代理人繼承了其 LLM 和其他每個組件的行為。同樣，代理人和用戶的互動在傳統的對話設計系統和工作流系統中有其歷史，因此可以繼承用於確定這些系統功效的指標和測量集。

2025年2月 15日
代理人指南 (Agents Companion)

![][image4]
圖 4：AgentBench 的高層次圖表。19

像 AgentBench19 這樣的整體性代理人基準測試，試圖在多個場景中捕捉端到端的性能。當場景反映了您的代理人使用案例時，這更為現實，但如果它測試的是您的代理人未實現的能力，則不然。很難以既具體又通用的方式模擬環境、工具、指令和使用案例需求。公司和組織正在為專業使用案例建立公開的基準測試，例如 Adyen 的數據分析師排行榜 DBAStep20，如果您了解評估方法和排行榜上的代理人，這可能會給您一個更有針對性的評估。

公開基準測試是一個有價值的起點，可以讓您了解可能性並識別需要注意的陷阱。大多數基準測試評估都包含對常見失敗模式的討論，這可以指導您建立自己的、針對特定使用案例的評估框架。

2025年2月 16日
代理人指南 (Agents Companion)

除了公開評估之外，您還需要評估您的代理人在各種場景下的行為，以確保它能按照您的意願行事。您正在模擬與代理人的互動，並評估它的回應方式。這包括評估最終回應以及它在此過程中採取的一系列步驟（軌跡）。這是我們建議您開始使用的兩種最常見且最實用的方法。除此之外，您還可以使用許多其他評估技術，無論是針對子組件的更精細細節還是更廣泛的方法。

軟體工程師會將此與程式碼的自動化測試進行比較。投資自動化測試可以節省您的時間，並讓您對正在建構的軟體充滿信心。對於代理人來說，這種自動化在時間和信心上的回報更快。策劃評估數據集對於準確表示您的代理人將遇到的使用案例極其重要，甚至比在軟體測試中更重要。

**評估軌跡與工具使用**

代理人在回應使用者之前通常會執行多個動作。它可能會將使用者輸入與會話歷史進行比較以消除術語的歧義，或者查詢策略文件、搜尋知識庫或調用 API 來儲存工單。每個動作都是路徑上的一個步驟，也稱為動作的「軌跡」(trajectory)。每次您的代理人做某件事時，背後都有一條動作軌跡。

將您期望代理人採取的軌跡與代理人實際採取的軌跡進行比較，對於希望對其應用程式進行除錯、識別錯誤或低效率並最終提高性能的開發人員來說尤其有用。

2025年2月 17日
代理人指南 (Agents Companion)

![][image5]
圖 5：LangSmith 關於最終評估和軌跡的圖表。21

以下六種基於地面實況 (ground-truth) 的自動化軌跡評估，提供了不同的視角來評估代理人的性能：

1. **完全匹配 (Exact match):** 要求 AI 代理人產生的動作序列（「軌跡」）與理想解決方案完全一致。這是最嚴格的指標，不允許與預期路徑有任何偏差。

2. **順序匹配 (In-order match):** 此指標評估代理人完成預期軌跡的能力，同時容納額外的、不扣分的動作。成功定義為按順序完成核心步驟，並具有執行額外動作的靈活性。

3. **任意順序匹配 (Any-order match):** 與順序匹配相比，此指標現在不考慮順序。它詢問代理人是否包含了所有必要的動作，但不關心所採取動作的順序，也允許額外的步驟。

2025年2月 18日
代理人指南 (Agents Companion)

4. **精確率 (Precision):** 預測軌跡中有多少工具呼叫是根據參考軌跡實際相關或正確的？

5. **召回率 (Recall):** 參考軌跡中有多少必要的工具呼叫被實際捕獲在預測軌跡中？

6. **單一工具使用 (Single-tool use):** 了解特定動作是否在代理人的軌跡內。此指標有助於了解代理人是否已經學會利用特定工具。

![][image6]圖 6：一個雷達圖，繪製了具有幾個指標的單一軌跡評估。24

2025年2月 19日
代理人指南 (Agents Companion)

將這些指標視為分析和除錯您的代理人軌跡的不同鏡頭。每個指標都提供了一個獨特的視角，但並非所有指標都適用於所有情況。例如，某些使用案例要求嚴格遵守理想軌跡，而其他使用案例則允許更具創造性的偏差。這種評估方法的一個明顯限制是，您需要有一個參考軌跡才能使其正常工作。雖然此處討論的基於地面實況的自動化軌跡評估在流行的函式庫中很普遍，但研究正在推進使用代理人自動評分器進行更有效的評估，例如 Agent as a Judge, 202422。

**評估最終回應**

最終回應評估歸結為一個簡單的問題：您的代理人是否達成了其目標？您可以定義客製化的成功標準，根據您的特定需求量身定制，以衡量這一點。例如，您可以評估零售聊天機器人是否準確回答產品問題，或者研究代理人是否以適當的語氣和風格有效地總結了研究結果。為了自動化此流程，您可以使用自動評分器 (autorater)。自動評分器是一個充當裁判的 LLM。給定輸入提示和生成的回應，它透過根據一組用戶提供的標準評估回應來模仿人類評估。為了使此評估有效，至關重要的是要考慮到在沒有地面實況的情況下，您需要非常精確地定義您的評估標準，因為這是您評估的核心。您可以在各種函式庫中找到許多預定義的標準，將它們視為起點並進行調整，以提供您對「好」的定義。

2025年2月 20日
代理人指南 (Agents Companion)

**人在環路評估 (Human-in-the-Loop Evaluation)**

代理人開發和代理人評估領域正在迅速發展。評估 AI 代理人帶來了重大挑戰，包括定義明確的目標、設計現實的環境、管理隨機行為，以及確保公平性和偏見緩解，尤其是在具有社會影響力的應用中。因此，除了前面討論的自動化評估（涉及預定義的指標和自動評分器）之外，納入人在環路 (human-in-the-loop) 的方法至關重要。人在環路對於需要主觀判斷或創造性解決問題的任務很有價值，它也可以用來校準和複查您的自動化評估方法是否真的有效並符合您的偏好。主要好處包括：

• **主觀性 (Subjectivity):** 人類可以評估難以量化的品質，例如創造力、常識和細微差別。

• **上下文理解 (Contextual Understanding):** 人類評估者可以考慮代理人行動的更廣泛背景及其影響。

• **迭代改進 (Iterative Improvement):** 人類回饋為改進代理人的行為和學習過程提供了寶貴的見解。

• **評估評估者 (Evaluating the evaluator):** 人類回饋可以提供一個信號來校準和改進您的自動評分器。

要實施人在環路評估，請考慮以下方法：

• **直接評估 (Direct Assessment):** 人類專家直接對代理人在特定任務上的表現進行評分。

• **比較評估 (Comparative Evaluation):** 專家將代理人的表現與其他代理人或您先前迭代的表現進行比較。

2025年2月 21日
代理人指南 (Agents Companion)

• **使用者研究 (User Studies):** 參與者與代理人互動，並就其行為、可用性和整體有效性提供回饋。

**更多關於代理人評估**

在本節中，我們從實踐的角度涵蓋了代理人評估。但這只是冰山一角。代理人評估存在許多挑戰。您的代理人的評估數據可能很難找到。雖然可以使用合成數據或 LLM 作為裁判，但評估可能仍然不完整。此外，例如，LLM 作為裁判的指標可能會優先考慮最終結果，而不是代理人的推理和中間行動，從而可能錯失關鍵見解。此外，由於代理人系統的評估在對話和工作流系統中有其歷史，因此在如何繼承方法和指標以評估代理人的能力方面還有很多值得探索的地方，例如在多次互動中提高任務性能的能力。多模態生成的評估帶來了額外的複雜性；圖像、音訊和影片的評估需要它們自己的評估方法和指標。最後，真實世界的環境帶來了進一步的挑戰，因為它們是動態和不可預測的，使得在受控環境中評估代理人變得困難。

展望未來，為了解決這些開放性挑戰，代理人評估領域正在迅速發展。主要趨勢包括轉向基於過程的評估，優先理解代理人推理；增加 AI 輔助評估方法以提高可擴展性；以及更關注真實世界的應用背景。開發新的標準化基準測試也越來越受到重視，以促進代理人之間的客觀比較，同時更加強調可解釋性和可詮釋性，旨在更深入地了解代理人行為。

2025年2月 22日
代理人指南 (Agents Companion)

| 評估方法 | ![][image7]優點 | ![][image8]缺點 |
| :--- | :--- | :--- |
| **人工評估** | 捕捉細微行為，考慮人為因素 | 主觀，耗時，昂貴，難以擴展 |
| **LLM 作為裁判** | 可擴展，高效，一致 | 可能忽略中間步驟，受 LLM 能力限制 |
| **自動化指標** | 客觀，可擴展，高效 | 可能無法捕捉全部能力，易受操縱 |

表 1：比較代理人自動化評估的優缺點。

至此應該很清楚，只有不斷完善評估方法，我們才能確保 AI 代理人在未來能夠負責任、有效且合乎道德地開發和部署。

**多代理人及其評估**

代理人評估，如前一節所述，評估自主 AI 代理人的有效性、可靠性和適應性，已成為一個關鍵的焦點領域。我們已經看到 AI 系統的重大演進，正轉向多代理人 (Multi-Agent) 架構——其中多個專業化代理人協作以實現複雜的目標。

一個多代理人系統就像一個專家團隊，每個專家都專精於特定領域，共同解決一個複雜的問題。每個代理人都是一個獨立的實體，可能使用不同的 LLM，並有其獨特的角色和背景。代理人之間進行溝通和協作以實現共同的目標。這種方法不同於傳統的單一代理人系統，後者由一個 LLM 處理任務的所有方面。

2025年2月 23日
代理人指南 (Agents Companion)

多代理人系統相較於單一代理人系統有幾個優勢：

• **增強準確性 (Enhanced Accuracy):** 代理人可以互相核對工作，從而獲得更準確的結果。

• **提高效率 (Improved Efficiency):** 代理人可以並行工作，加快任務完成速度。

• **更好地處理複雜任務 (Better Handling of Complex Tasks):** 可以將大型任務分解為更小、更易於管理的子任務，每個代理人專注於特定方面。

• **增加可擴展性 (Increased Scalability):** 可以透過增加具有專業能力的代理人來輕鬆擴展系統。

• **提高容錯性 (Improved Fault Tolerance):** 如果一個代理人失敗，其他代理人可以接管其職責。

• **減少幻覺和偏見 (Reduced Hallucinations and Bias):** 透過結合多個代理人的觀點，系統可以減少幻覺和偏見的影響，從而獲得更可靠和值得信賴的輸出。

**理解多代理人架構**

與傳統的單體 AI 系統不同，多代理人架構將問題分解為由專業化代理人處理的不同任務。每個代理人都有明確的角色，並與其他代理人動態互動，以優化決策、知識檢索和執行。這些架構能夠實現更結構化的推理、去中心化的問題解決和可擴展的任務自動化，為單一代理人工作流程帶來了典範轉移。

在其核心，多代理人系統利用模組化、協作和層級的原則來創建一個強大的 AI 生態系統。這些系統中的代理人可以根據其功能進行分類，例如：

2025年2月 24日
代理人指南 (Agents Companion)

• **規劃者代理人 (Planner Agents):** 負責將高層次的目標分解為結構化的子任務。

• **檢索者代理人 (Retriever Agents):** 透過動態地從外部來源獲取相關數據來優化知識獲取。

• **執行者代理人 (Execution Agents):** 執行計算、生成回應或與 API 互動。

• **評估者代理人 (Evaluator Agents):** 監控和驗證回應，確保連貫性並與目標一致。

透過這些組件，多代理人架構超越了簡單的基於提示的互動，實現了適應性強、可解釋且高效的 AI 驅動工作流程。

**多代理人設計模式及其商業影響**

為了設計有效的多代理人架構，出現了特定的設計模式。這些模式定義了互動協議、委派機制和角色分配，讓企業能夠以結構化的方式實施 AI 驅動的自動化。一些常見的設計模式包括：

2025年2月 25日
代理人指南 (Agents Companion)

| 多代理人系統類型 | 描述 | 範例 |
| --- | :--- | :--- |
| **循序式 (Sequential)** | 代理人以循序的方式工作，每個代理人完成其任務後，將輸出傳遞給下一個代理人。 | 一條裝配線，每個工人在將產品傳遞給下一個工人之前執行特定的操作。 |
| **分層式 (Hierarchical)** | 代理人被組織在一個分層結構中，由一個「管理者」代理人協調工作流程並將任務委派給「工作者」代理人。 | 一個系統，其中有一個領導者代理人負責做出戰略決策，而追隨者代理人則根據領導者的指示執行任務。 |
| **協作式 (Collaborative)** | 代理人共同協作，分享資訊和資源以實現共同目標。 | 一組研究人員在一個專案上工作，每個成員都貢獻自己的專業知識和見解。 |
| **競爭式 (Competitive)** | 代理人可能會互相競爭以達到最佳結果。 | LLM 在像 Overcooked-AI 這樣的遊戲中扮演獨立玩家，它們必須協調行動以實現共同目標，同時競爭資源並優化個人表現。 |

表 2：比較不同類型的多代理人系統。

2025年2月 26日
代理人指南 (Agents Companion)

![][image9]
圖 7：一張描繪不同多代理人拓撲結構的圖片，來自 LangGraph 文件。23

設計模式的選擇取決於具體的應用和代理人之間期望的互動水平。

企業透過這些模式受益，可以減少營運瓶頸、改善知識檢索並增強自動化可靠性。多代理人系統使公司能夠擴展 AI 部署，同時確保決策和工作流程執行的敏捷性。

2025年2月 27日
代理人指南 (Agents Companion)

**代理人的重要組成部分**

基於 LLM 的 AI 代理人架構由幾個相互關聯的組件組成，這些組件對於自主操作和智慧互動至關重要：

• **互動包裝器 (Interaction Wrapper):** 此組件作為代理人與其環境之間的介面，管理通訊並適應各種輸入和輸出模態。

• **記憶體管理 (Memory Management):** 這包括用於即時上下文的短期工作記憶體、快取和會話。它還可以包括用於學習到的模式和經驗的長期儲存，如情節、範例、技能或參考數據。它還包括「反思」(reflection)，以決定哪些短期項目（例如：用戶偏好）應該被複製到長期記憶體（例如：用戶個人資料），以及是否可以在代理人、任務或會話之間共享。

• **認知功能 (Cognitive Functionality):** 這通常由思維鏈 (Chain-of-Thought, CoT)、ReAct、推理、思考或規劃子系統支撐——它允許代理人將複雜的任務分解為邏輯步驟並進行自我修正。在某些情況下，這也包括用戶意圖的細化，以便在不確定時提出澄清問題。

• **工具整合 (Tool Integration):** 該子系統使代理人能夠利用外部工具，將其能力擴展到自然語言處理之外。動態工具註冊表允許發現、註冊和「工具 RAG」。

• **流程/路由 (Flow / Routing):** 這管理與其他代理人的連接，促進動態鄰居發現和多代理人系統內的有效通訊。這可以實現為將任務委派給後台代理人、將用戶互動交接給代理人，或將代理人作為工具使用。

2025年2月 28日
代理人指南 (Agents Companion)

• **回饋循環/強化學習 (Feedback Loops / Reinforcement Learning):** 這些透過處理互動結果和改進決策策略來實現持續學習和適應。對於生成式 AI 代理人來說，這很少採用傳統強化學習訓練的形式，但過去的性能指標可以納入未來的決策中。

• **代理人通訊 (Agent Communication):** 代理人之間的有效通訊對於多代理人系統的成功至關重要。代理人對代理人 (Agent to Agent) 通訊協議促進了代理人之間結構化和高效的通訊，使它們能夠達成共識並協作解決複雜問題。

• **遠端代理人通訊 (Remote Agent Communication):** 組織內的代理人對代理人通訊至關重要，它允許代理人共享訊息、任務和知識。一旦您的多代理人系統包含一個遠端代理人，通訊協議就變得更加重要。異步任務和會話需要持久，並在終端使用者不在會話中時透過通知進行更新。代理人之間的協商必須允許將使用者帶入會話並支持 UX 功能。

• **代理人與工具註冊表 (網格) (Agent & Tool Registry (mesh)):** 當您使用的工具或代理人數量超過少數時，您需要一個強大的系統來從工具或代理人的「網格」中發現、註冊、管理、選擇和利用。至關重要的是工具和代理人的本體論和描述、它們的能力和要求，以及它們的性能指標。您的代理人將制定一個計劃，並從這樣的系統中選擇使用哪個工具或哪個代理人，而這些選擇是由系統中的數據所告知的。

2025年2月 29日
代理人指南 (Agents Companion)

![][image10]
圖 8：一張展示使用者與多個自我協調代理人互動過程的圖片。24

這些架構元素為 LLM 代理人在多代理人系統中的自主操作和協作能力提供了堅實的基礎。

2025年2月 30日
代理人指南 (Agents Companion)

**多代理人系統中的挑戰**

雖然多代理人系統提供了許多優勢，但它們也面臨一些挑戰：

• **任務通訊 (Task Communication):** 現今大多數代理人框架以訊息而非結構化的異步任務進行通訊。

• **任務分配 (Task Allocation):** 在不同代理人之間有效地分配複雜任務可能具有挑戰性，而回饋循環通常留給開發人員來實現。

• **協調推理 (Coordinating Reasoning):** 讓代理人有效地進行辯論和共同推理需要複雜的協調機制。

• **管理上下文 (Managing Context):** 追蹤所有代理人之間的資訊、任務和對話可能會讓人不知所措。

• **時間與成本 (Time and Cost):** 多代理人互動可能計算成本高昂且耗時。這導致更高的執行時間價格和更多的用戶延遲。

• **複雜性 (Complexity):** 就像微服務架構允許每個微服務更具靈活性和簡單性一樣，整個系統通常變得更加複雜。

解決這些挑戰對於開發強大而高效的多代理人系統至關重要。

2025年2月 31日
代理人指南 (Agents Companion)

**多代理人評估 (Multi-Agent Evaluation)**

幸運的是，多代理人系統的評估是評估單一代理人系統的明確進展。代理人成功指標不變，業務指標作為您的北極星，目標和關鍵任務成功指標，以及應用程式遙測指標（如延遲和錯誤）。使用追蹤來檢測多代理人系統將有助於在複雜的互動過程中進行除錯和理解。

在代理人評估部分，我們討論了評估軌跡和評估最終回應作為代理人自動化評估的兩種最佳方法，這對於多代理人系統仍然適用。對於一個多代理人系統，一個動作的軌跡可能包括幾個甚至所有的代理人。儘管多個代理人可能在一個任務上協作，但最終會向使用者返回一個單一的最終答案，並且可以單獨對其進行評估。

因為一個多代理人系統可能有更多的步驟，您可以深入並在每一步進行評估。您可以單獨評估每個代理人以及整個系統。軌跡評估是實現這一點的可擴展方法。

您需要問一些獨特於多代理人系統的問題，包括：

• **合作與協調 (Cooperation and Coordination):** 代理人之間合作和協調行動以實現共同目標的效果如何？

• **規劃與任務分配 (Planning and Task Assignment):** 我們是否制定了正確的計劃，並且堅持執行了？子代理人是否偏離了主計劃或迷失在死胡同裡？

• **代理人利用率 (Agent Utilization):** 代理人選擇正確的代理人以及選擇將代理人作為工具使用、委派後台任務或轉移用戶的效果如何？

2025年2月 32日
代理人指南 (Agents Companion)

• **可擴展性 (Scalability):** 隨著更多代理人的加入，系統的品質是否提高？延遲是否降低？我們是變得更有效率還是更低效率？

這些類型的問題可以引導開發人員找出多代理人系統中需要改進的地方。您將使用與單一代理人系統相同的工具來回答這些問題，但分析的複雜性會增加。

**代理式 RAG：檢索增強生成的關鍵演進**

多代理人架構的一個重大進展是**代理式檢索增強生成 (Agentic Retrieval-Augmented Generation, Agentic RAG)**。傳統的 RAG 管線依賴於一種靜態方法——從向量資料庫中檢索知識，然後將其饋入 LLM 進行綜合。然而，這種方法在處理模稜兩可、多步驟或多視角的查詢時常常會失敗。

代理式 RAG 引入了**自主檢索代理人**，它們會根據迭代推理主動地改進其搜尋。這些代理人透過以下方式增強檢索：

• **上下文感知查詢擴展 (Context-Aware Query Expansion):** 代理人不是依賴單一的搜尋過程，而是生成多個查詢的改進版本，以檢索更相關和全面的結果。

• **多步驟推理 (Multi-Step Reasoning):** 代理人將複雜的查詢分解為更小的邏輯步驟，循序地檢索資訊以建構結構化的回應。

• **適應性來源選擇 (Adaptive Source Selection):** 檢索代理人不是從單一的向量資料庫中獲取數據，而是根據上下文動態地選擇最佳的知識來源。

• **驗證與修正 (Validation and Correction):** 評估者代理人在將檢索到的知識整合到最終回應之前，會對其進行幻覺和矛盾的交叉檢查。

2025年2月 33日
代理人指南 (Agents Companion)

這種方法顯著提高了回應的**準確性**、**可解釋性**和**適應性**，使其成為企業在法律研究、科學發現和商業智慧等領域處理複雜知識檢索任務的關鍵創新。

**代理式 RAG 及其重要性**

代理式檢索增強生成 (Agentic Retrieval-Augmented Generation, Agentic RAG) 是一種先進的方法，它將 RAG 的優勢與 AI 代理人的自主性相結合。傳統的 RAG 系統從外部知識來源檢索相關資訊以增強 LLM 的回應。代理式 RAG 更進一步，它利用智慧代理人來協調檢索過程、評估檢索到的資訊，並決定如何最好地利用它。

代理式 RAG 相較於傳統 RAG 有幾個優勢：

• **提高準確性 (Improved Accuracy):** 代理人可以評估檢索資訊的品質，並決定信任哪些來源，從而獲得更準確可靠的回應。

• **增強上下文理解 (Enhanced Contextual Understanding):** 代理人可以考慮使用者查詢的上下文和檢索到的資訊，以生成更相關、更有意義的回應。

• **增加適應性 (Increased Adaptability):** 代理人可以適應不斷變化的資訊需求，並動態調整其檢索策略，以提供最新、最相關的資訊。這種適應性在資訊不斷演變的複雜領域至關重要，例如醫療保健、金融和法律研究。

2025年2月 34日
代理人指南 (Agents Companion)

![][image11]
圖 9：來自 Vectorize.io 的代理式 RAG 圖表。25

代理式 RAG 在資訊不斷演變的複雜領域尤其有價值，例如醫療保健、金融和法律研究。例如，在醫療保健領域，代理式 RAG 可以幫助導航複雜的醫療資料庫、研究論文和病患記錄，為醫生提供全面而準確的資訊。

2025年2月 35日
代理人指南 (Agents Companion)

**更好的搜尋，更好的 RAG (Better Search, Better RAG)**

幾乎所有的 RAG 方法都需要一個搜尋引擎來索引和檢索相關數據。代理人的引入允許對查詢、過濾、排名和最終答案進行細化。代理式 RAG 代理人正在執行多次搜尋以檢索資訊。

對於試圖優化現有 RAG 實作的開發人員來說，在引入代理人之前改善搜尋結果（以召回率衡量）通常最有價值。一些改善搜尋性能的主要技術是：

• **解析 (Parse)** 來源文件並將其**分塊 (chunk)**：**Vertex AI Layout Parser** 可以處理複雜的文件佈局、嵌入式表格和嵌入式圖像（如圖表），並使用語意分塊器 (semantic chunker) 來保持分塊的主題性，並帶有標題層次結構。

• 為您的分塊添加**元數據 (metadata)**：同義詞、關鍵字、作者、日期、標籤和類別允許您的搜尋進行提升、降權和過濾；這些讓您的使用者或您的代理人對搜尋結果有更多的控制權。

• 微調**嵌入模型 (embedding model)** 或添加一個改變嵌入空間的**搜尋適配器 (search adaptor)**：這些允許可搜尋的向量索引比通用嵌入模型更好地代表您的領域。

• 更快的向量資料庫可以提高搜尋品質：要搜尋嵌入，您必須在速度和準確性之間做出權衡，升級到超高速的 **Vertex AI Vector Search** 可以同時改善延遲和品質。

• 使用**排序器 (ranker)**：向量搜尋速度快但為近似值，它們應該返回數十或數百個結果，這些結果需要由更複雜的系統重新排序，以確保前幾個結果是最相關或最佳的答案。

• 實作**檢查 grounding**：作為對 grounded generation 的保障，您可以確保每個短語都可以被檢索到的分塊實際引用。

2025年2月 36日
代理人指南 (Agents Companion)

![][image12]
圖 10：一個常見的 RAG 和搜尋組件圖，顯示了 Vertex AI Search26、搜尋建構器 API27 和 RAG 引擎28。

Vertex AI Search26 是一個強大的搜尋引擎，為您的數據提供 Google 品質的搜尋，並且可以與任何 RAG 或代理式 RAG 實作一起使用。上述每個組件都自動在 Vertex AI Search 中可用，完全無需開發時間。對於想要建構自己的搜尋引擎的開發人員，上述每個組件都作為獨立的 API27 公開，而 RAG 引擎28 可以輕鬆地協調整個管線，並提供類似 LlamaIndex 的基於 Python 的介面。

2025年2月 37日
代理人指南 (Agents Companion)

**企業中的代理人**

**代理人管理者**

2025 年是代理人之年，這在企業環境中尤其如此，企業將開發和使用代理人來協助員工執行特定任務，或在後台自主運行以執行自動化。業務分析師可以毫不費力地發現行業趨勢，並創建由 AI 生成的洞察力驅動的、引人注目的數據驅動簡報。人力資源團隊可以透過簡化的入職流程徹底改變員工體驗，即使是像 401k 選擇這樣的複雜任務也不例外。軟體工程師可以主動識別和解決錯誤，使他們能夠以更高的效率進行建構和迭代，並加速部署週期。行銷人員可以解鎖更深入的性能分析，優化內容推薦，並毫不費力地微調活動以取得更好的成果。

我們看到兩種代理人正在興起：

1. **「助理 (Assistants)」**: 與使用者互動、接受任務、執行任務並向使用者回報的代理人。由 Gems 或 GPTs 等框架普及的對話式代理人通常屬於此類。助理可以是通用的——能夠在各種任務上提供幫助——也可以是專門針對特定領域或任務的。範例包括幫助安排會議、分析數據、編寫程式碼、撰寫行銷新聞稿、幫助銷售人員處理銷售機會，甚至根據使用者要求對特定主題進行深入研究的代理人。這些代理人可以是同步的，快速返回所要求的資訊或執行所要求的任務，也可以運行較長時間後再返回（如深度研究代理人）。

2025年2月 38日
代理人指南 (Agents Companion)

2. **「自動化代理人 (Automation agents)」**: 在後台運行，監聽事件，監控系統或數據的變化，然後做出明智的決策並採取行動的代理人。行動可能包括對後端系統採取行動、執行一些測試以驗證觀察結果、解決問題、通知合適的員工等。這確實可以被視為未來自動化的支柱。過去我們必須編寫特殊的程式碼來指定自動化的邏輯，現在我們可以開始依賴 AI 代理人的智慧和通用決策能力。

知識工作者將越來越多地成為代理人的管理者，而不是僅僅調用代理人來執行任務並等待輸出。他們將向多個代理人分配任務並進行管理，檢查是否有任何代理人需要幫助或需要批准才能繼續，使用特定代理人的輸出來啟動新任務，監控長時間運行的任務的執行以進行審查並引導它們朝著正確的方向發展。新穎的使用者介面將出現，以允許這種虛擬團隊管理，從而允許協調、監控和管理一個由執行任務、呼叫（甚至創建）其他代理人的代理人組成的多代理人系統。

**Google Agentspace** 旨在提供這種類型的體驗，並允許：

• 透過使用無程式碼/低程式碼介面或完整的程式碼框架來**創建新代理人**，以實現專業化的助理和自動化代理人。

• 為公司管理員**配置**和管理代理人存取權限。• 在適當的時候**調用**正確的代理人。

• 在適合團隊管理的 UI 中**監控**、**管理**和**協調**多個代理人。

2025年2月 39日
代理人指南 (Agents Companion)

**Google Agentspace**

Google Agentspace29 提供了一套由 AI 驅動的工具，旨在透過促進對相關資訊的存取和自動化複雜的代理人工作流程來提升企業生產力。它利用了 Gemini 的先進推理能力、Google 搜尋基礎設施的力量，以及對企業數據的安全存取，無論其物理位置如何。

Agentspace 直接解決了傳統知識管理系統固有的局限性，這些系統在個人化、自動答案生成、上下文理解和全面資訊檢索等領域常常表現不佳。它透過整合不同的內容來源、生成基於事實且個人化的回應以及簡化操作工作流程，賦予員工高效的資訊存取能力。主要功能包括能夠擷取各種數據格式、從軟體即服務 (SaaS) 平台同步數據、提供存取控制的搜尋結果和 AI 生成的答案，以及將 AI 輔助和智慧代理人整合到連貫的工作流程中。

Agentspace 企業版的架構建立在幾個核心原則之上。其中最重要的是內建的信任，它透過單一登入 (Single Sign-On, SSO) 身份驗證、整合的權限模型和使用者級別的存取控制等功能，優先考慮安全性、可解釋性和治理。Google 的先進智慧被用來透過機器學習辨別使用者行為和內容模式，從而透過語意理解、知識圖譜和 LLM 提供高度相關的結果。透過連接到各種企業系統，並提供隨選和自動化的數據刷新，實現了通用連接性，從而消除了資訊孤島。透過對搜尋功能、推薦、LLM 和知識圖譜的精細控制，促進了企業級的客製化和使用者級別的個人化，根據個人使用者角色、權限和搜尋歷史提供量身定制的體驗。即時回饋和適應機制能夠透過機器學習和使用者輸入持續改進結果。混合式檢索增強生成 (Blended Retrieval Augmented Generation, RAG) 允許客製化的數據混合，為基於企業數據的生成式 AI 應用提供支援。最後，可擴展性是一個關鍵的設計考量，系統被設計為能夠適應跨地理區域、語言和高峰使用需求的增長。

安全性始終是首要考量。Google Agentspace 建立在 Google Cloud 的安全設計基礎設施之上，讓您能夠安心地在整個組織中自信地部署 AI 代理人。它提供了精細的 IT 控制，包括基於角色的存取控制 (Role-Based Access Control, RBAC)、VPC 服務控制和 IAM 整合，確保您的數據始終受到保護並符合法規。安全性是 Agentspace 的一個基本原則。它建立在 Google Cloud 的安全基礎設施之上，為部署 AI 代理人提供了一個強大的環境。精細的 IT 控制，包括 RBAC、虛擬私有雲 (Virtual Private Cloud, VPC) 服務控制和身份與存取管理 (Identity and Access Management, IAM) 整合，保證了數據保護和法規遵循。這些安全措施對於保護敏感資訊至關重要，並讓使用者能夠安心地在整個組織中自信地部署 AI 代理人。

**NotebookLM 企業版**

NotebookLM30 是一款研究和學習工具，旨在簡化理解和綜合複雜資訊的過程。它使用戶能夠上傳各種來源資料，包括文件、筆記和其他相關檔案，並利用人工智慧的力量促進更深層次的理解。想像一下研究一個多方面的課題；NotebookLM 讓您能夠將所有分散的資源整合到

2025年2月 41日
代理人指南 (Agents Companion)

一個單一、有組織的工作區。從本質上講，NotebookLM 扮演著一個專門的研究助理的角色，加速了研究過程，並使用戶能夠從單純的資訊收集轉向真正的理解。

![][image13]圖 11：配置了一些模擬收益報告的 NotebookLM 企業版30。

NotebookLM Plus 在此基礎上建構，提供一個具有增強特性和功能的高級層級。雖然上傳來源、提問和生成摘要的核心功能仍然存在，但 NotebookLM Plus 通常會增加諸如增加來源資料儲存空間等特性，從而能夠處理更大、更複雜的專案。它

2025年2月 42日
代理人指南 (Agents Companion)

也可能包含更複雜的由 AI 驅動的分析工具，例如更細緻的摘要選項、增強的問答能力，或更有效地識別不同來源之間聯繫和關係的能力。

在 NotebookLM Plus 的基礎上，NotebookLM 企業版30 將這些強大的功能帶入企業環境，簡化了員工與數據互動並從中獲取洞察的方式。這個企業級版本不僅使用戶能夠上傳和綜合資訊，還能發現隱藏的模式並以創新的方式與數據互動。一個典型的例子是 AI 生成的音訊摘要功能，它透過讓使用者「聆聽」他們的研究來增強理解並促進高效的知識吸收。

技術上，NotebookLM，無論是消費者版還是企業版，都採用 LLM 來處理上傳的文件、提取關鍵概念並生成摘要。音訊摘要功能使用文字轉語音 (Text-to-Speech, TTS) 技術，並結合先進的韻律控制以確保清晰度和自然度。至關重要的是，NotebookLM 企業版整合了企業級的安全和隱私功能，確保敏感的公司數據得到最謹慎的處理，並根據組織政策受到保護。`

**Google AgentSpace 企業版**

Google Agentspace 為員工提供了一個統一的、公司品牌的、多模態的搜尋代理人，作為企業資訊的權威來源。憑藉 Google 廣泛的搜尋能力，Agentspace 提供了無與倫比的對話式輔助。員工可以獲得複雜查詢的答案、主動的建議，以及對來自任何來源的資訊的統一存取。此功能擴展到非結構化數據（如文件和電子郵件）和結構化數據（如表格）。整合的翻譯功能確保了全面的理解，無論資訊的原始語言為何。為廣泛使用的第三方應用程式（包括 Confluence、Google Drive、Jira、Microsoft SharePoint、ServiceNow 等）預建的連接器，使員工能夠無縫地存取和查詢相關數據來源，從而促進更明智的決策。

2025年2月 43日
代理人指南 (Agents Companion)

![][image14]圖 12：為 Cymbal 銀行客製化並連接到多個數據儲存的 Agentspace29。

代理人的功能遠不止資訊檢索，它們可以在現實世界中採取行動、管理異步任務和工作流程，並幫助員工完成工作。可以根據組織的獨特需求配置一個代理人庫，它將有助於深度研究、創意生成和基於價值的改進、創意資產生成、數據分析等等。

2025年2月 44日
代理人指南 (Agents Companion)

Agentspace 企業版 Plus 有助於創建針對特定業務功能的客製化 AI 代理人。該平台能夠開發和部署具有上下文感知能力的生成式 AI 代理人，使跨部門（行銷、財務、法律、工程等）的員工能夠進行更有效的研究、快速生成內容並自動化重複性任務，包括多步驟工作流程。一個集中的介面簡化了這些專業化代理人的發現和存取，促進了可擴展的 AI 採用。客製化代理人將與內部和外部系統及數據連接，根據公司領域和政策進行量身定制，甚至可能利用在專有業務數據上訓練的機器學習模型。該平台為建構者提供了代理人開發、部署和生命週期管理的工具。

2025年2月 45日
代理人指南 (Agents Companion)

**從代理人到承包商 (From agents to contractors)**

現今在各種工具和平台上定義 AI 代理人的通用介面非常簡單，通常包括指定目標、一些文本指令、代理人可以使用的工具以及一組範例。雖然這可能足以製作原型演示，但它會導致潛在的定義不夠具體，並可能是 AI 代理人難以從原型走向生產的主要原因之一。

我們建議將代理人介面演進為「遵守合約的代理人 (Contract adhering agents)」，旨在利用 AI 代理人解決複雜的任務，特別是在風險較高的情況下。

**合約 (Contracts)**

承包商 (contractors) 的關鍵思想是指定和標準化請求者與代理人之間的合約，從而可以：

1. **盡可能精確地定義結果**，就像我們在現實世界中與我們簽約的公司就某項服務達成協議時所做的那樣。這使得代理人（承包商）能夠根據期望的結果進行驗證，並不斷迭代直到達到期望的目標。

2. 使**協商任務**以及澄清和改進任務成為可能，以避免定義中的任何模糊性，並填補對目標的共同理解中的任何差距。

3. 為承包商定義規則，以便以標準方式**生成解決更大合約所需的新子合約**（參見下面關於子合約的部分）。

2025年2月 46日
代理人指南 (Agents Companion)

| 4.合約，初始定義 | | |
| :--- | --- | --- |
| **欄位** | **描述** | **必填** |
| **任務/專案描述** | 提供我們期望承包商達成的詳細描述。它應該盡可能具體和明確。 | 是 |
| **交付成果與規格** | 精確描述承包商任務的預期結果和交付成果，包括一份規格清單，闡明什麼使交付成果可被接受為結果，以及如何驗證交付成果是否滿足期望的詳細資訊。 | 是 |
| **範圍** | 闡明承包商負責完成的任務範圍，詳細說明任務的每個方面。也用於闡明什麼是超出範圍的。 | 否 |
| **預期成本** | 給出任務完成的成本預期。這通常是任務複雜性與將使用的工具相結合的函數。 | 是 |
| **預期持續時間** | 給出任務完成的持續時間預期。 | 是 |
| **輸入來源** | 指定可以使用哪些輸入來源，並認為對完成任務有用。 | 否 |
| **報告與回饋** | 指定回饋循環應如何進行：我們期望多久收到一次進度更新，以及使用什麼機制/介面提供回饋（電子郵件、API 等）。 | 是 |

表 3：合約的範例數據模型。

2025年2月 47日
代理人指南 (Agents Companion)

| 合約迭代：回饋與協商 | | |
| :--- | :--- | --- |
| **欄位** | **描述** | **必填** |
| **規格不足** | 強調規格不足或需要任務發起者澄清的方面。 | 否 |
| **成本協商** | 認為完成任務的成本過高。 | 否 |
| **風險** | 強調履行合約的潛在風險。 | 否 |
| **需要額外輸入** | 表達需要哪些額外的數據或資訊才能履行合約。 | 否 |

表 4：承包商之間訊息迭代的範例數據模型。

2025年2月 48日
代理人指南 (Agents Companion)

**合約生命週期 (Contract Lifecycle)**

下圖顯示了定義、協商和執行合約的生命週期：

![][image15]圖 13：來自 Agentspace 的代理人即承包商生命週期圖。

**合約執行 (Contract execution)**

這要求承包商執行環境能夠履行合約，並根據其定義的規格解決合約背後的任務。優先考慮品質和完整性而非延遲，能夠充分利用 LLM 的能力，例如

2025年2月 49日
代理人指南 (Agents Companion)

透過生成不同的解決方案，並對其進行審查、評分和演進。Co-Scientist 研究中展示了這種方法的一個例子。引擎可以根據提供的期望，對結果和交付成果進行迭代和自我驗證，並可以改進和自我修正，直到驗證器得到滿足。能夠根據一組客觀標準具體驗證解決方案的能力，已被證明在 AI 的背景下非常有效，並且是成功的 AI 系統（例如 Alpha-Code）的核心。

**合約協商 (Contract Negotiation)**

在自動化代理人的背景下，合約背後的一個核心假設是，企業世界中的許多任務在以較少限制（延遲和成本方面）的方式使用 LLM 的強大功能時，可以從中獲得顯著的益處。

能夠處理越來越複雜的任務，並使客戶能夠依賴和信任承包商的結果，將確保為公司帶來真正的價值。即便如此，我們也需要有一個相對優先級的概念，以確保任務得到適當的優先級排序，資源也得到公平的分配。因此，我們引入了一個成本概念（通常是相對於每個客戶或合約發起人），可以由合約發起人和承包商之間進行討論和協商，以確保合約相對於合約發起人發起的其他合約，獲得足夠的資源。承包商也可以協商合約的其他方面，例如規格和交付成果（也請參見下面關於回饋的部分）。

2025年2月 50日
代理人指南 (Agents Companion)

**合約回饋 (Contract Feedback)**

合約提供了一種提供回饋的工具，特別是用於解決模糊之處。隨著任務變得越來越複雜，能夠盡早提出與任務規格相關的模糊之處或其他問題至關重要。承包商可以在收到合約後立即（初始合約評估），然後以合約中預定的頻率提供對合約的回饋。

此回饋將包含澄清請求，或關於任務規格不足或錯誤指定的其他類型的回饋（不一致、規格衝突、澄清等）。

**子合約 (Subcontracts)**

雖然不直接屬於合約定義和規格的一部分，但將任務分解為子任務並生成子合約的能力，是驅動承包商引擎的核心概念。

當一個任務被認為過於複雜而無法直接處理時，承包商可以決定將該任務分解為更小、更容易的任務，這些任務將被添加到執行佇列中等待解決。這只有透過上述的合約形式化才有可能實現，它使得承包商能夠以統一和標準化的方式生成、處理和操作其他合約。

2025年2月 51日
代理人指南 (Agents Companion)

**Google 的 Co-Scientist：多代理人智慧案例研究**

Google 的 AI 共同科學家 (AI co-scientist) 是一個將多代理人 LLM 系統應用於科學研究的典型範例。該系統利用一個由專業化代理人組成的團隊，每個代理人都有自己的角色和專業知識，以加速科學發現的步伐。這些代理人協作生成、評估和改進假設，模仿科學探究的迭代過程。

該共同科學家系統採用「生成、辯論和演進」的方法，從科學方法中汲取靈感。這種方法涉及生成多樣化的假設，批判性地評估其潛力，並透過持續的回饋和分析來改進它們。該系統利用不同 LLM 的優勢，每個 LLM 都專精於研究過程的特定方面，以實現更全面、更穩健的結果。

例如，在一項關於肝纖維化治療的研究中，這位共同科學家不僅識別了現有藥物，還提出了新的機制和有前景的候選藥物，展示了其產生新穎見解的潛力。其主要組成部分包括：

• **數據處理代理人 (Data Processing Agents):** 匯總和結構化大量的實驗數據。

• **假設生成器 (Hypothesis Generators):** 根據現有研究和新發現提出潛在的解釋。

• **驗證代理人 (Validation Agents):** 運行模擬並在將結果呈現給研究人員之前進行驗證。

• **協作代理人 (Collaboration Agents):** 在不同研究團隊之間溝通發現，增強跨學科合作。

2025年2月 52日
代理人指南 (Agents Companion)

圖 14：AI 共同科學家系統的流程圖31

這種方法例證了多代理人架構如何超越靜態的 AI 互動，轉而培養能夠處理研究、企業自動化和知識管理中複雜任務的動態、演進的智慧。

2025年2月 53日
代理人指南 (Agents Companion)

**汽車 AI：多代理人架構的真實世界應用**

為了說明多代理人概念在實踐中如何體現，讓我們來檢視一個專為汽車對話式 AI 設計的綜合性多代理人系統，其中幾個專業化代理人協作提供直觀、無縫的車內體驗。

首先，我們將看一些專業化代理人的例子，然後是一些將它們組合起來形成多代理人系統的常見模式。

**專業化代理人 (Specialized Agents)**

讓我們先看一些專業化代理人的例子。

**對話式導航代理人 (Conversational Navigation Agent)**

對話式導航代理人專門幫助使用者尋找地點、建議地點，並使用像 Google Places 和 Maps 這樣的 API 進行導航。該代理人理解像「幫我找附近一家壽司餐廳」這樣的導航意圖，查詢 Places API 以獲得相關結果，根據使用者偏好和歷史數據對這些結果進行重新排序，並將導航命令發送到汽車的內建系統。

2025年2月 54日
代理人指南 (Agents Companion)

**互動範例：**

**使用者：**「我需要休息一下吃午餐。在我去慕尼黑的路上有什麼好餐廳嗎？」

**導航代理人：**「我在 A9 公路上沿途為您找到了三家評價很好的餐廳。25 公里處，在因戈爾施塔特出口有『Gasthaus Alte Mühle』，評分 4.5 顆星——評論者稱讚他們的傳統巴伐利亞菜餚和啤酒花園。45 公里處，在服務區的『La Strada』有 4.1 顆星，評論說他們的快速義大利餐很好。或者如果您可以再等 70 公里，在阿勒斯豪森附近的『Zeitlos』有 4.7 顆星——這家比較高級，提供從農場到餐桌的美食。您對哪一家最感興趣？」

**使用者：**「那家巴伐利亞餐廳聽起來不錯。那裡停車方便嗎？離高速公路有多遠？」

**導航代理人：**「Gasthaus Alte Mühle 有一個專用停車場，大約有 40 個車位。它距離 A9 因戈爾施塔特北出口僅 1.2 公里——大約 2 分鐘車程。他們以烤豬肉和自製餃子聞名。中午時段會很忙，但目前顯示為中等佔用率。您想讓我將這裡設為您的目的地並引導您過去嗎？如果我們現在出發，您大約會在 12:15 到達。」

**對話式媒體搜尋代理人 (Conversational Media Search Agent)**

對話式媒體搜尋代理人專門幫助使用者尋找和播放音樂、有聲書和播客。該代理人從本地資料庫或串流媒體服務中檢索媒體，在必要時使用網路搜尋額外內容，根據心情、天氣和時間等情境因素建議媒體，並處理語音命令，例如「為我的駕駛播放一個輕鬆的播放清單」。當使用者問「誰的聲音像約翰·柯川？」等問題時，它還能識別相似的藝術家或內容。

2025年2月 55日
代理人指南 (Agents Companion)

**互動範例：**

**使用者：**「播點輕快的音樂，讓我在這漫長的高速公路上保持清醒。」

**對話式媒體搜尋代理人：**「我會播放一個輕快的駕駛播放清單，幫助您保持精力。從皇后樂團的『Don't Stop Me Now』開始，接著是一些 Daft Punk 和 Stromae 的曲目。我還添加了一些符合您偏好的歐洲流行廣播金曲。我已經調整了音量以獲得最佳的道路感知。如果您想跳過一首歌，只需說『下一首』。」

**訊息撰寫代理人 (Message Composition Agent)**

訊息撰寫代理人專門幫助使用者在駕駛時起草、摘要和發送訊息或電子郵件。該代理人解析語音命令，如「告訴 Alex 我要遲到了」，使用自然語言模型撰寫符合上下文的訊息，提供草稿預覽並允許使用者修改，並與包括簡訊、WhatsApp 和電子郵件在內的各種訊息應用程式整合。

**互動範例：**

**使用者：**「E40 公路交通嚴重堵塞。通知我的團隊，我早上的站立會議會遲到 20 分鐘。」

**訊息撰寫代理人：**「我已經為您的工作團隊準備了一條訊息：『因 E40 公路交通堵塞，我將會遲到約 20 分鐘參加我們的晨間站會。請不用等我，直接開始。』我應該將此訊息發送到您的『工作團隊』聊天群組，還是您想先編輯一下？」

2025年2月 56日
代理人指南 (Agents Companion)

**汽車手冊代理人 (Car Manual Agent)**

汽車手冊代理人專門透過利用檢索增強生成 (Retrieval-Augmented Generation, RAG) 系統來回答與汽車相關的問題。該代理人根據使用者查詢從汽車手冊中檢索相關章節，使用 LLM 總結和情境化這些資訊，並在適當時將使用者連結到詳細的文件或教學影片。

**互動範例：**

**使用者：**「在這輛福斯汽車中，如何關閉車道維持輔助功能？」

**汽車手冊代理人：**「要關閉您福斯汽車的車道維持輔助功能，請按方向盤左側帶有汽車和車道圖示的按鈕。當它被停用時，您會在駕駛員顯示器上看到確認訊息。您也可以在資訊娛樂系統的『設定』>『駕駛員輔助』>『車道維持』下永久禁用它。您想讓我引導您瀏覽設定選單嗎？」

**通用知識代理人 (General Knowledge Agent)**

通用知識代理人專門回答關於世界、歷史、科學、文化和其他一般主題的事實性問題。該代理人存取廣泛的知識庫來回答事實性問題，提供人物的傳記資訊，對概念和現象提供上下文解釋，在避免幻覺的同時保持對事實資訊的依據，並透過維持上下文感知來回應後續問題。

**互動範例：**

**使用者：**「告訴我一個關於薩爾斯堡的有趣事實。」

2025年2月 57日
代理人指南 (Agents Companion)

**通用知識代理人：**「奧地利的薩爾斯堡是莫札特的出生地，他是歷史上最著名的作曲家之一。除了這個眾所周知的事實之外，薩爾斯堡的老城區是聯合國教科文組織世界遺產，而且備受喜愛的音樂劇《真善美》的部分場景於 1964 年在那裡拍攝。薩爾斯堡音樂節是世界上最負盛名的音樂和戲劇節之一，自 1920 年以來每年都在那裡舉行。」

**使用中的模式 (Patterns in Use)**

讓我們來看看一些組合這些代理人的常用方法。

**分層模式 (Hierarchical Pattern)**

一個中央協調器代理人 (Orchestrator Agent) 對查詢進行分類，並將它們路由到專業化代理人。例如，當使用者詢問「幫我找附近的一家壽司餐廳」時，協調器會將其檢測為導航請求，並將其路由到導航代理人，後者負責處理位置搜尋和與地圖 API 的互動。

圖 15. 分層模式。

2025年2月 58日
代理人指南 (Agents Companion)

協調器代理人專門將查詢路由到最合適的專業化代理人，並管理整個對話流程。該代理人分析使用者查詢以確定領域和意圖，將請求導向最合適的專業化代理人，在多輪對話中維持對話上下文，並在專業化代理人無法提供滿意回應時管理後備策略。

**互動範例：**

**第一輪：**

**使用者：**「前面有乾淨廁所的服務區嗎？」

**協調器代理人：** [內部路由至導航代理人]

**導航代理人：**「在 E19 公路上前方 20 公里處有一個服務區。是 Aire de Waremme，去年剛翻新過，設施和清潔度評價都很好。那裡還有一家 Paul 麵包店和一家快餐店。」

**第二輪：**

**使用者：**「今晚我的目的地會下雨嗎？」

**協調器代理人：** [識別為天氣查詢並路由至天氣資訊代理人]

**天氣資訊代理人：**「您在布魯塞爾的目的地，預報顯示晚上有 60% 的機率會下小雨，大約從 19:00 開始。氣溫約為 14°C。如果您打算在戶外活動，我建議您帶把傘。」

2025年2月 59日
代理人指南 (Agents Companion)

**鑽石模式 (Diamond Pattern)**

在這種分層模式的變體中，來自專業化代理人的回應在到達使用者之前會經過一個中央審核代理人。例如，導航代理人生成關於附近餐廳的事實性回應，然後該回應會經過一個重述代理人 (Rephraser Agent)，該代理人會根據使用者偏好調整語氣和風格，然後再進行文字轉語音合成。

重述代理人專門根據使用者偏好和上下文調整回應的語氣、風格和呈現方式。該代理人將技術資訊轉換為對話式語言，根據駕駛條件和緊急程度調整回應長度，根據使用者偏好個人化溝通風格，並格式化複雜資訊以便在駕駛時更容易理解。

**互動範例：**

**[重述前汽車手冊代理人的原始回應]：**「在輪胎壓力監測系統警報事件中，車輛已檢測到一個或多個輪胎的壓力已低於建議的 2.2 巴充氣壓力。受影響輪胎的壓力約為 1.8 巴，比建議值低 18.75%。這不構成立即的安全危害，但長時間使用充氣不足的輪胎行駛會導致燃油效率下降、輪胎壽命縮短，並可能影響操控特性。建議您盡快前往服務站將輪胎充氣至適當規格。」

**重述代理人：** [針對駕駛情境進行調整，調整資訊密度和緊急程度]

**給使用者的最終回應：**「您的右前輪胎壓有點低——降到了 1.8 巴。繼續行駛是安全的，但您最好在下一個加油站加點氣。胎壓過低會影響您的燃油經濟性，並使輪胎磨損得更快。如果您需要，我可以幫您找一個附近的加氣站。」

2025年2月 60日
代理人指南 (Agents Companion)

圖 16. 鑽石模式。

**轉換範例：**

**初始回應（事實且中性）：**「我找到了一家評價很高的壽司餐廳。它叫櫻花壽司，地址是主街 123 號。評分 4.7 顆星，營業到晚上 10 點。您想讓我開始導航嗎？」

**重述後（俏皮風格）：**「想吃壽司？別說了！快去主街 123 號的櫻花壽司吧，那裡的魚很新鮮，醬油源源不絕！評分 4.7 顆星，營業到晚上 10 點。準備好來一場鮮味冒險了嗎？」

2025年2月 61日
代理人指南 (Agents Companion)

**點對點 (Peer-to-Peer)**

當代理人偵測到協調器發生路由錯誤時，它們可以互相交接查詢。這創建了一個更具彈性的系統，可以從最初的錯誤分類中恢復。

圖 17. 點對點。

**範例場景：**

1. 使用者詢問：「找附近吃壽司的地方」

2. 協調器正確地將此路由到對話式導航代理人，後者提供附近壽司餐廳的資訊。

3. 使用者接著問：「紐約中央公園有多大？」

4. 協調器最初可能會再次將此路由到對話式導航代理人（基於先前的導航相關對話）。

2025年2月 62日
代理人指南 (Agents Companion)

5. 然而，對話式導航代理人會意識到這是一個通用知識問題，而不是導航請求，並將其交接給通用知識代理人，後者可以提供關於中央公園大小的事實資訊。

**點對點交接與集中式協調相比的優勢：**

1. **對錯誤分類的彈性：** 即使中央協調器在路由上出錯，專業化代理人也能夠識別查詢何時超出其領域範圍並適當地重新導向。

2. **路由方面的領域專業知識：** 專業化代理人通常對自己領域的邊界有更好的理解。媒體搜尋代理人比通用協調器更清楚地知道它能處理哪些類型的音樂相關查詢。

3. **降低協調複雜性：** 中央協調器在初始路由中不需要完美的準確性，從而降低了其決策邏輯的複雜性。

**協作模式 (Collaborative Pattern)**

協作模式涉及多個代理人處理同一個任務的互補方面，並由一個回應混合器代理人 (Response Mixer Agent) 將不同代理人回應的元素組合起來，創建一個全面的答案。這種方法認識到，不同的代理人根據其專業知識，為一個完整的解決方案貢獻了有價值的片段。該模式在以下情況下特別有價值：

1. 查詢的不同方面需要不同類型的專業知識（例如，技術規格、實用建議和概念解釋）

2. 沒有單一的代理人擁有完整的資訊來完全解決使用者的需求 3. 使用者將從對同一個問題的多個視角中受益

2025年2月 63日
代理人指南 (Agents Companion)

4. 不同的專業化代理人可以存取不同的知識庫或推理能力

與回應相互競爭的競爭性方法不同，協作模式假設來自不同代理人的回應是互補的而不是多餘的。回應混合器代理人會從每個來源中識別出最有價值的資訊，並將其綜合為一個連貫的答案，從而利用每個專家的獨特優勢。

例如，當被問及如何處理水漂時，汽車手冊代理人提供特定車輛的安全系統資訊，駕駛技巧代理人提供實用的駕駛技巧，而通用知識代理人則解釋現象背後的物理原理。它們共同創造了一個比任何單一代理人所能提供的更完整、更有用的回應。

2025年2月 64日
代理人指南 (Agents Companion)

圖 18. 協作模式。

2025年2月 65日
代理人指南 (Agents Companion)

**回應混合器代理人 (Response Mixer Agent)**

回應混合器專門從多個代理人中挑選最佳回應，並在需要時將它們合併。該代理人根據答案的準確性和相關性評估答案，移除不正確的資訊，並將不同回應中的有用部分組合起來，為使用者創建最有幫助的答案。

**互動範例：**

**使用者：**「我該如何處理水漂 (aquaplaning)？」

**[幕後，多個代理人生成回應：]**

**汽車手冊代理人回應：**「您的奧迪配備了電子穩定控制系統 (ESC) 和防鎖死煞車系統 (ABS)，它們透過維持循跡控制來幫助防止水漂。」[信心分數：71%]

**通用知識代理人回應：**「當您的輪胎因輪胎與路面之間積水而失去與路面的接觸時，就會發生水漂。」[信心分數：65%]

**安全提示代理人回應：**「如果您遇到水漂，請鬆開油門，避免突然煞車或轉向，並輕輕地朝您想去的方向轉向，直到您重新獲得循跡力。」[信心分數：94%]

**回應混合器代理人：**[挑選最相關的部分並將它們合併成一個完整的答案]

**給使用者的最終回應：**「如果您遇到水漂，也就是當您的輪胎因輪胎與路面之間積水而失去接觸時，請鬆開油門，避免突然煞車或轉向，並輕輕地朝您想去的方向轉向，直到您重新獲得循跡力。您的奧迪的電子穩定控制系統和 ABS 系統將有助於維持控制，但正確的駕駛技巧仍然至關重要。」

2025年2月 66日
代理人指南 (Agents Companion)

這種競爭性方法確保了關鍵的安全資訊不會因路由錯誤而被遺漏，並且即使在查詢有多種合理解釋的情況下，使用者也能收到最有用可能的回應。

**適應性循環模式 (Adaptive Loop Pattern)**

適應性循環模式涉及透過重複嘗試進行迭代式改進，逐步改善結果，直到滿足期望的標準。

對話式導航代理人可以實現一個循環模式，以便在初始查詢未產生滿意結果時，迭代地改善搜尋結果。

**互動範例：**

1. 使用者詢問：「找一家提供素食選項的義大利餐廳」 2. 導航代理人使用這些參數查詢 Places API

3. 代理人評估結果，發現沒有符合所有標準的餐廳 4. 代理人不會返回「無結果」，而是自動重新擬定查詢： • 第一次循環：搜尋「提供素食選項的義大利餐廳」

• 第二次循環：擴大範圍至「義大利餐廳」，然後篩選提及植物性選項的餐廳

• 第三次循環：如果仍然不成功，則搜尋「素食餐廳」，並篩選具有義大利風味的餐廳

5. 代理人呈現這些漸進式搜尋中的最佳匹配項，並解釋它們與原始請求的關係

2025年2月 67日
代理人指南 (Agents Companion)

這種循環行為使得搜尋能力更加強大，能夠適應可用性和上下文，即使沒有完全匹配的結果也能提供有用的結果。

**多代理人架構在汽車 AI 中的優勢**

多代理人系統透過將複雜的任務分解為專業化的角色，為汽車 AI 帶來了強大的優勢。可以把它想像成組建一個專家團隊，而不是依賴一個通才。

在這種方法中，每個代理人都專精於自己最擅長的事情。導航代理人只專注於尋找地點和規劃路線。媒體搜尋代理人成為音樂和播客的專家。汽車手冊代理人專門負責車輛功能和故障排除。透過專注於特定領域，每個代理人都在其領域內發展出更深層次的能力。

這種專業化使整個系統更有效率。當一個代理人處理的任務範圍更窄時，優化其性能就變得更簡單。結果是以更低的計算成本更快地提供更高品質的回應。性能得到改善，因為系統可以為每個任務匹配正確的資源。簡單的請求使用最少的處理能力，而複雜的問題僅在需要時才利用更強大的資源。

在車輛中，速度至關重要，而多代理人系統在關鍵時刻能夠發揮作用。像調整空調控制或打開窗戶這樣的關鍵功能，由快速的設備端代理人運行，以實現即時回應。同時，像尋找餐廳推薦這樣不那麼緊急的任務，可以使用具有更廣泛知識的雲端代理人。這種分離確保了無論系統在做什麼，基本的車輛控制都能保持響應。

2025年2月 68日
代理人指南 (Agents Companion)

這種設計也創造了天然的彈性。如果網路連線中斷，在設備端代理人上運行的基本功能會繼續運作。您可能會暫時失去餐廳推薦，但空調控制和基本的媒體播放仍然可以完美運作。

**代理人建構器 (Agent Builder)**

**Vertex AI Agent Builder** 是一系列為開發人員設計的產品和服務。我們為您整合了一個全面的平台，用於建構和連接代理人。它結合了 Google Cloud 的工程卓越性和安全性、Google Deepmind 的 AI 研究，以及 AgentOps 的最佳實踐。Google Cloud 正在這個平台上建構我們自己的代理人，現在您也可以。預計 2025 年將有更多針對代理人開發人員的令人興奮的公告。

**Vertex AI Agent Engine** 簡化了開發流程，它依賴於 Google 工程管理的、與流行的開源代理人函式庫的整合。它提供了一個託管的自動擴展執行環境，以及代理人將需要的許多服務（例如：會話、範例、追蹤、評估）。這是以極低的工作量和高價值的方式，安全地部署您用任何框架編寫的代理人的方法。

**Vertex AI Eval Service** 提供了本白皮書中討論的所有評估工具，以及更多。LLM、RAG 和代理人評估透過 Vertex AI Eval Service 穩定且可擴展，並與監控和實驗產品方便地整合。

一個龐大的代理人工具組合，還有更多值得期待：

• 透過 Vertex AI Search26 或 RAG Engine28 進行檢索。

• 透過 Gen AI Toolbox for Databases32 從資料庫進行非搜尋式檢索。

2025年2月 69日
代理人指南 (Agents Companion)

• 與數百個支援完整 ACL 的 API 的應用程式整合33 • 使用 Apigee Hub34 將任何 API 轉變為託管的、企業就緒的工具

當然還有最好的代理人 LLM，可以存取 Vertex AI Model Garden35 以及將為代理人時代提供動力的 Gemini 模型家族36。

**總結**

本白皮書（我們早期關於代理人白皮書的補充）探討了生成式 AI 代理人快速發展的格局，從其基本架構到先進的評估技術，以及多代理人系統的變革潛力。

給開發人員的關鍵要點：

1. **AgentOps 至關重要：** 建立成功的代理人遠不止於最初的概念驗證。擁抱 AgentOps 原則，整合 DevOps 和 MLOps 的最佳實踐，同時也要專注於代理人特定的元素，如工具管理、協調、記憶體和任務分解。

2. 指標驅動改進：從業務層面的 KPI（如目標完成率、用戶參與度或收入）開始，作為您的「北極星」。然後，檢測您的代理人以追蹤與關鍵任務、用戶互動和代理人行動（追蹤）相關的細粒度指標。人類回饋（����、用戶調查）是無價的。

3. **自動化評估是關鍵：** 不要僅僅依賴手動測試。實施自動化評估框架，評估代理人能力、軌跡（所採取的步驟）和最終回應。利用諸如完全匹配、順序匹配、精確率/召回率等技術進行軌跡評估，並使用自動評分器（LLM 作為裁判）來評估最終回應品質。

2025年2月 70日
代理人指南 (Agents Companion)

4. **人在環路至關重要：** 自動化指標功能強大，但人工評估提供了必要的背景，尤其是在創造力、常識和細微差別等主觀方面。利用人工回饋來校準和驗證您的自動化評估方法。不要將領域知識外包。

5. **多代理人系統提供優勢：** 對於複雜的任務，可以考慮多代理人架構。它們可以提高準確性、效率、可擴展性和容錯性。了解不同的設計模式（循序式、分層式、協作式、競爭式），並為您的應用程式選擇合適的模式。

6. **代理式 RAG 提高相關性：** 超越傳統的 RAG，納入能夠主動改進搜尋查詢、評估檢索到的資訊並適應不斷變化的知識的代理人。這會帶來更準確、更具上下文相關性的回應。

7. **搜尋優化是 RAG 的基礎：** 在深入研究複雜的代理式 RAG 之前，請先優化您的底層搜尋引擎。語意分塊、元數據豐富、微調嵌入模型和使用排序器等技術可以顯著提高檢索品質。

8. **代理人和工具註冊表很重要：** 隨著您使用的代理人或工具數量的增長，一個用於管理能力、本體論和性能的註冊表變得至關重要。

9. **安全性至關重要：** 部署代理人時，尤其是在企業內部，請優先考慮安全性。利用像 Google Agentspace 這樣的平台，它提供內建的安全功能，如 RBAC、VPC 服務控制和 IAM 整合。

10.**高效利用開發人員週期：** 經典的自建與購買的設計選擇仍然是首要考慮，因為生成式 AI 代理人行業正在迅速發展。考慮使用平台和產品作為從頭開始建構一切的替代方案。這將緩衝快速變化的行業帶來的一些波動，並讓您能夠專注於您的數據、領域和使用者。

2025年2月 71日
代理人指南 (Agents Companion)

11. **企業中的代理人：** 代理人正在透過讓我們變得更有效率，以及自動化可以完成的方式，來改變我們的工作方式。知識工作者將越來越多地管理代理人團隊，新穎的用戶體驗也將出現。Google Agentspace 是一個強大的工具，允許將企業搜尋、AI 和 AI 代理人置於公司數據和工作流程之上。

**代理人研究與發展的未來方向：** AI 代理人領域正在經歷快速的演變。正在進行的研究和發展的關鍵領域包括：

• **先進的評估方法：** 開發更強大、更可擴展的評估技術，包括基於流程的評估（專注於推理）、AI 輔助評估和標準化的基準測試。

• **多代理人協調：** 改善多代理人系統內的協調和通訊機制，以實現更有效的協作、任務處理和推理。

• **真實世界適應：** 創建能夠在動態、不可預測的真實世界環境中適應和學習的代理人。像汽車 AI 這樣的生產系統說明了代理人必須如何在關鍵功能的設備端性能和複雜任務的雲端能力之間取得平衡，通常還要適應不斷變化的連接條件。

• **可解釋性與可詮釋性：** 使代理人行為更加透明和易於理解，讓開發人員和使用者能夠更深入地了解其決策過程。

• **長期記憶與學習：** 開發更複雜的記憶體機制，讓代理人能夠在更長的時間內保留和利用資訊，從而實現持續學習和適應。

2025年2月 72日
代理人指南 (Agents Companion)

• **代理人通訊協議 (Agent Communication Protocols):** 
更好地定義代理人如何共享任務、知識和訊息，尤其是在不透明的遠端系統之間。

• **從代理人到承包商 (From Agents to contractors):** 
為了讓代理人達到更高的可靠性和實用性，我們需要提升任務的定義，將其變為具有明確交付成果、驗證機制和協商模糊性能力的合約，就像我們與其他公司簽訂工作合約一樣。

**行動呼籲：**

AI 的未來是代理式的。我們鼓勵開發人員擁抱這些概念，並開始建構下一代智慧應用程式。開始試驗本白皮書中討論的工具和技術。探索可用的資源，例如 Google Agentspace、NotebookLM 企業版、Vertex Eval Service、Cloud Observability 和 Vertex AI Search，以加速您的開發過程。深入研究提供的程式碼範例、教學和文件，以獲得實踐經驗。建構、評估、迭代，並為不斷壯大的代理人開發人員社群做出貢獻。可能性是無限的，現在就是建構的時機！具體來說，請從參考資料中的程式碼和 Colab 筆記本開始。

2025年2月 73日
代理人指南 (Agents Companion)
