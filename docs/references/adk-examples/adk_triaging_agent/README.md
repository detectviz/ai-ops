# ADK 問題分類助理

ADK 問題分類助理是一個基於 Python 的代理，旨在協助管理和分類 `google/adk-python` 儲存庫的 GitHub 問題。它使用大型語言模型來分析新的和未標記的問題，根據預定義的規則集推薦並應用適當的標籤。

此代理可以兩種不同的模式運作：用於本機使用的互動模式或作為完全自動化的 GitHub Actions 工作流程。

---

## 互動模式

此模式允許您在本機執行代理，以便在對儲存庫的問題進行任何變更之前，即時審查其建議。

### 功能
* **Web 介面**：代理的互動模式可以使用 ADK 的 `adk web` 命令在網頁瀏覽器中呈現。
* **使用者批准**：在互動模式下，代理被指示在將標籤應用於 GitHub 問題之前，請求您的確認。

### 在互動模式下執行
若要在互動模式下執行代理，請先設定必要的環境變數。然後，在您的終端機中執行以下命令：

```bash
adk web
```
這將啟動一個本機伺服器，並提供一個 URL，讓您在瀏覽器中存取代理的 Web 介面。

---

## GitHub 工作流程模式

對於自動化的、無需手動操作的問題分類，可以將代理直接整合到您儲存庫的 CI/CD 管線中，使用 GitHub Actions 工作流程。

### 工作流程觸發器
GitHub 工作流程設定為在特定觸發器上執行：

1.  **問題事件**：每當新的問題被 `開啟` 或現有的問題被 `重新開啟` 時，工作流程都會自動執行。

2.  **排程執行**：工作流程也會定期執行（每 6 小時），以處理任何可能被遺漏的未標記問題。

### 自動化標記
作為 GitHub 工作流程的一部分執行時，代理會以非互動方式運作。它會直接識別並應用最佳標籤，而無需使用者批准。此行為是透過在工作流程檔案中將 `INTERACTIVE` 環境變數設定為 `0` 來配置的。

### 工作流程組態
工作流程在一個 YAML 檔案 (`.github/workflows/triage.yml`) 中定義。此檔案包含簽出程式碼、設定 Python 環境、安裝相依性以及使用必要的環境變數和密鑰執行分類腳本的步驟。

---

## 設定與組態

無論是在互動模式還是工作流程模式下執行，代理都需要以下設定。

### 相依性
代理需要以下 Python 函式庫。

```bash
pip install --upgrade pip
pip install google-adk requests
```

### 環境變數
代理需要以下環境變數才能連接到必要的服務。

* `GITHUB_TOKEN`: **(必要)** 具有 `issues:write` 權限的 GitHub 個人存取權杖。互動和工作流程模式都需要。
* `GOOGLE_API_KEY`: **(必要)** 您的 Gemini API 的 API 金鑰。互動和工作流程模式都需要。
* `OWNER`: 擁有儲存庫的 GitHub 組織或使用者名稱（例如 `google`）。兩種模式都需要。
* `REPO`: GitHub 儲存庫的名稱（例如 `adk-python`）。兩種模式都需要。
* `INTERACTIVE`: 控制代理的互動模式。對於自動化工作流程，此設定為 `0`。對於互動模式，應設定為 `1` 或不設定。

對於在本機互動模式下執行，您可以將這些變數放在專案根目錄中的 `.env` 檔案中。對於 GitHub 工作流程，應將它們設定為儲存庫密鑰。
