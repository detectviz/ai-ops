# Copyright 2025 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
sources:
    my-sqlite-db:
        kind: "sqlite"
        database: "tool_box.db"
tools:
  search-hotels-by-name:
    kind: sqlite-sql
    source: my-sqlite-db
    description: 根據名稱搜尋飯店。
    parameters:
      - name: name
        type: string
        description: 飯店的名稱。
    statement: SELECT * FROM hotels WHERE name LIKE '%' || $1 || '%';
  search-hotels-by-location:
    kind: sqlite-sql
    source: my-sqlite-db
    description: 根據地點搜尋飯店。
    parameters:
      - name: location
        type: string
        description: 飯店的地點。
    statement: SELECT * FROM hotels WHERE location LIKE '%' || $1 || '%';
  book-hotel:
    kind: sqlite-sql
    source: my-sqlite-db
    description: >-
       依 ID 預訂飯店。如果飯店預訂成功，則傳回 NULL，否則引發錯誤。
    parameters:
      - name: hotel_id
        type: string
        description: 要預訂的飯店 ID。
    statement: UPDATE hotels SET booked = 1 WHERE id = $1;
  update-hotel:
    kind: sqlite-sql
    source: my-sqlite-db
    description: >-
      依 ID 更新飯店的入住和退房日期。傳回一則訊息，指出飯店是否已成功更新。
    parameters:
      - name: hotel_id
        type: string
        description: 要更新的飯店 ID。
      - name: checkin_date
        type: string
        description: 飯店的新入住日期。
      - name: checkout_date
        type: string
        description: 飯店的新退房日期。
    statement: >-
      UPDATE hotels SET checkin_date = strftime('%Y-%m-%d', replace($2, ',', '')), checkout_date = strftime('%Y-%m-%d', replace($3
      ',', '')) WHERE id = $1;
  cancel-hotel:
    kind: sqlite-sql
    source: my-sqlite-db
    description: 依 ID 取消預訂飯店。
    parameters:
      - name: hotel_id
        type: string
        description: 要取消預訂的飯店 ID。
    statement: UPDATE hotels SET booked = 0 WHERE id = $1;
toolsets:
  my-toolset:
    - search-hotels-by-name
    - search-hotels-by-location
    - book-hotel
    - update-hotel
    - cancel-hotel
