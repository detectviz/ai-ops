# SRE Platform - é–‹ç™¼è·¯ç·šåœ–

## ç¸½è¦½

æœ¬æ–‡ä»¶æ˜¯ SRE Platform å°ˆæ¡ˆçš„**å”¯ä¸€çœŸå¯¦ä¾†æº (Single Source of Truth)**ï¼Œç”¨æ–¼è¿½è¹¤æ‰€æœ‰é–‹ç™¼ä»»å‹™ã€‚å®ƒæ ¹æ“šæ¶æ§‹è¨­è¨ˆçš„éšæ®µé€²è¡Œçµ„ç¹”ï¼Œä¸¦æ•´åˆäº†æ‰€æœ‰æ–°åŠŸèƒ½ã€é‡æ§‹è¨ˆç•«å’Œå·²çŸ¥çš„æŠ€è¡“å‚µã€‚

---

## Phase 1: æ ¸å¿ƒæ•´åˆ (Core Integration)

- **ä¸»é¡Œ**: å°ˆæ³¨æ–¼å®Œæˆ `sre-assistant` èˆ‡ `control-plane` ä¹‹é–“çš„æ‰€æœ‰æŠ€è¡“å°æ¥å·¥ä½œï¼Œç¢ºä¿å…©è€…èƒ½å¤ å®‰å…¨ã€å¯é åœ°å”åŒå·¥ä½œã€‚
- **é—œéµç›®æ¨™**: å¯¦ç¾ä¸€å€‹å¯ç”± `control-plane` è§¸ç™¼ä¸¦å®Œæˆç«¯åˆ°ç«¯è¨ºæ–·æµç¨‹çš„æœ€å°å¯è¡Œç”¢å“ (MVP)ã€‚

### ä¸»è¦äº¤ä»˜ç‰© (Key Deliverables):

- **[ğŸš§] 1.1. API å¥‘ç´„ç¬¦åˆæ€§ (API Contract Compliance)**:
    - **ä»»å‹™**: ç¢ºä¿ `sre-assistant` çš„ FastAPI æœå‹™åš´æ ¼éµå®ˆ `openapi.yaml` ä¸­å®šç¾©çš„æ‰€æœ‰ç«¯é»ã€è«‹æ±‚æ ¼å¼å’Œå›æ‡‰æ ¼å¼ã€‚
    - **ç‹€æ…‹**: `sre-assistant` ç›®å‰ç‚ºåŒæ­¥å¯¦ç¾ï¼Œèˆ‡ `openapi.yaml` çš„éåŒæ­¥è¨­è¨ˆä¸ç¬¦ã€‚

- **[âœ…] 1.2. æœå‹™å°æœå‹™èªè­‰ (M2M Authentication)**:
    - **ä»»å‹™**: å®Œæ•´å¯¦ç¾åŸºæ–¼ Keycloak å’Œ Client Credentials Flow çš„èªè­‰æ©Ÿåˆ¶ã€‚
    - **åƒè€ƒ**: `docs/reference-adk-examples.md` (oauth_calendar_agent)

- **[ğŸš§] 1.3. æ ¸å¿ƒå·¥å…·é–‹ç™¼ (`Prometheus`, `Loki`, `ControlPlane`)**:
    - **ä»»å‹™**: å¯¦ç¾ `PrometheusQueryTool`ã€`LokiLogQueryTool` å’Œ `ControlPlaneTool`ï¼Œç‚ºè¨ºæ–·æµç¨‹æä¾›æ•¸æ“šä¾†æºã€‚
    - **ç‹€æ…‹**: å·¥å…·è™•æ–¼éª¨æ¶éšæ®µï¼Œå¤§éƒ¨åˆ†è¿”å›æ¨¡æ“¬è³‡æ–™ã€‚
    - **å°æ‡‰ API**: é€™äº›å·¥å…·æ˜¯ `/diagnostics/deployment` ç«¯é»çš„åŸºç¤ã€‚
    - **åƒè€ƒ**: `docs/reference-adk-examples.md` (jira_agent, bigquery)

- **[ğŸš§] 1.4. ç«¯åˆ°ç«¯æµç¨‹å¯¦ä½œèˆ‡æ¸¬è©¦**:
    - **ä»»å‹™**: åœ¨ `SREWorkflow` ä¸­æ•´åˆæ‰€æœ‰æ ¸å¿ƒå·¥å…·ï¼Œä¸¦å»ºç«‹ä¸€å€‹å®Œæ•´çš„æ•´åˆæ¸¬è©¦ï¼Œä»¥é©—è­‰ `/diagnostics/deployment` çš„ç«¯åˆ°ç«¯æµç¨‹ã€‚
    - **ç‹€æ…‹**: ç›®å‰å·¥ä½œæµç¨‹åƒ…ç‚ºä½”ä½ç¬¦ï¼Œç¼ºå°‘çœŸå¯¦çš„åˆ†æé‚è¼¯ã€‚
    - **å°æ‡‰ API**: `/diagnostics/deployment`ã€‚
    - **åƒè€ƒ**: `docs/reference-adk-examples.md` (parallel_functions, workflow_agent_seq)

- **[âœ…] 1.5. æ ¸å¿ƒæœå‹™æœ¬åœ°åŒ–èˆ‡æŒä¹…åŒ–**:
    - **ä»»å‹™**: ç¢ºä¿é–‹ç™¼ç’°å¢ƒä½¿ç”¨ PostgreSQL ä½œç‚ºæœƒè©±å¾Œç«¯ï¼ŒChromaDB ä½œç‚ºè¨˜æ†¶é«”å¾Œç«¯ï¼Œä¸¦èƒ½ç©©å®šå•Ÿå‹•èˆ‡äº’å‹•ã€‚
    - **åƒè€ƒ**: `docs/reference-adk-examples.md` (history_management, session_state_agent)

---

## Phase 2: Control Plane åŠŸèƒ½æ“´å±•èˆ‡ UI æ•´åˆ

- **ä¸»é¡Œ**: å°ˆæ³¨æ–¼æ“´å…… `sre-assistant` çš„å¾Œç«¯èƒ½åŠ›ï¼Œä¸¦ç‚ºé€™äº›èƒ½åŠ›åœ¨ `control-plane` ä¸Šæä¾›å°æ‡‰çš„ UI æ“ä½œä»‹é¢ã€‚
- **é—œéµç›®æ¨™**: è®“ä½¿ç”¨è€…èƒ½å¤ é€é UI è§¸ç™¼ `sre-assistant` çš„å„é …æ ¸å¿ƒè¨ºæ–·åŠŸèƒ½ã€‚

### ä¸»è¦äº¤ä»˜ç‰© (Key Deliverables):

- **[ ] 2.1. å¯¦ç¾å‘Šè­¦è¨ºæ–·å¾Œç«¯é‚è¼¯**:
    - **ä»»å‹™**: å®Œæ•´å¯¦ç¾ `SREWorkflow` ä¸­çš„ `_diagnose_alerts` æ–¹æ³•ï¼Œä½¿å…¶èƒ½å¤ è™•ç†ä¾†è‡ª UI çš„å‘Šè­¦åˆ†æè«‹æ±‚ã€‚
    - **å°æ‡‰ API**: `/diagnostics/alerts`
    - **åƒè€ƒ**: `docs/reference-adk-examples.md` (workflow_triage)

- **[ ] 2.2. å¯¦ç¾å®¹é‡åˆ†æå¾Œç«¯é‚è¼¯**:
    - **ä»»å‹™**: ç‚º `SREWorkflow` æ–°å¢å®¹é‡åˆ†æçš„é‚è¼¯ï¼Œä½¿å…¶èƒ½å¤ æ ¹æ“šè«‹æ±‚åŸ·è¡Œå®¹é‡è¦åŠƒè¨ˆç®—ã€‚
    - **å°æ‡‰ API**: `/capacity/analyze`
    - **åƒè€ƒ**: `docs/references/snippets/salvaged_code.md` (SLO éŒ¯èª¤é ç®—è¨ˆç®—é‚è¼¯)

- **[ ] 2.3. å¯¦ç¾é€šç”¨æŸ¥è©¢å¾Œç«¯é‚è¼¯**:
    - **ä»»å‹™**: æ•´åˆèªè¨€æ¨¡å‹ï¼Œä½¿ `/execute` ç«¯é»èƒ½å¤ ç†è§£æ›´å»£æ³›çš„è‡ªç„¶èªè¨€æŸ¥è©¢ã€‚
    - **å°æ‡‰ API**: `/execute`
    - **åƒè€ƒ**: `docs/reference-adk-examples.md` (adk_triaging_agent)

- **[ ] 2.4. Control Plane UI é–‹ç™¼**:
    - **ä»»å‹™**: åœ¨ Control Plane (Go æœå‹™) çš„å‰ç«¯é é¢ä¸­ï¼Œç‚ºä¸Šè¿°ä¸‰å€‹ç«¯é»æä¾›å°æ‡‰çš„è§¸ç™¼ä»‹é¢ï¼ˆä¾‹å¦‚ï¼ŒæŒ‰éˆ•ã€è¡¨å–®ï¼‰ã€‚

- **[ ] 2.5. æ¸¬è©¦è¦†è“‹ç‡æå‡**:
    - **ä»»å‹™**: ç‚ºæ‰€æœ‰åœ¨ Phase 1 å’Œ Phase 2 ä¸­å¯¦ç¾çš„æ ¸å¿ƒæ¨¡çµ„èˆ‡å·¥å…·å¢åŠ å–®å…ƒæ¸¬è©¦èˆ‡æ•´åˆæ¸¬è©¦ï¼Œç›®æ¨™è¦†è“‹ç‡ > 80%ã€‚

---

## Phase 3: è¯é‚¦åŒ–èˆ‡ä¸»å‹•é é˜² (Federation & Proactive Prevention)

- **ä¸»é¡Œ**: å°‡ `sre-assistant` å¾å–®ä¸€ä»£ç†æ¼”é€²ç‚ºå¤šä»£ç†å”åŒçš„è¯é‚¦åŒ–ç³»çµ±ï¼Œä¸¦å…·å‚™é æ¸¬æ€§ç¶­è­·èƒ½åŠ›ã€‚
- **é—œéµç›®æ¨™**: å¯¦ç¾å¾ã€Œè¢«å‹•éŸ¿æ‡‰ã€åˆ°ã€Œä¸»å‹•é é˜²ã€çš„è½‰è®Šã€‚

### ä¸»è¦äº¤ä»˜ç‰© (Key Deliverables):

- **[ ] 3.1. å¯¦ç¾å¢å¼·å‹ SRE å·¥ä½œæµç¨‹**:
    - **ä»»å‹™**: æ ¹æ“š `salvaged_code.md` ä¸­çš„ `EnhancedSREWorkflow` ç¯„ä¾‹ï¼Œé‡æ§‹ç¾æœ‰çš„ `SREWorkflow`ï¼Œå¼•å…¥ `SequentialAgent`, `ParallelAgent` ç­‰ ADK æ¨™æº–æ¨¡å¼ã€‚
    - **åƒè€ƒ**: `docs/references/snippets/salvaged_code.md` (å¢å¼·å‹ SRE å·¥ä½œæµç¨‹)

- **[ ] 3.2. ç¬¬ä¸€å€‹å°ˆæ¥­åŒ–å­ä»£ç†**:
    - **ä»»å‹™**: å°‡ä¸€é …æ ¸å¿ƒåŠŸèƒ½ï¼ˆå¦‚è¦†ç›¤å ±å‘Šç”Ÿæˆï¼‰é‡æ§‹ç‚ºä¸€å€‹ç¨ç«‹çš„ã€å¯é€é A2A (Agent-to-Agent) å”è­°å‘¼å«çš„ `PostmortemAgent`ã€‚
    - **åƒè€ƒ**: `docs/reference-adk-examples.md` (a2a_basic, a2a_auth)

- **[ ] 3.3. ä¸»å‹•é é˜²èƒ½åŠ›**:
    - **ä»»å‹™**: æ•´åˆæ©Ÿå™¨å­¸ç¿’æ¨¡å‹ï¼Œç”¨æ–¼ç•°å¸¸æª¢æ¸¬å’Œè¶¨å‹¢é æ¸¬ã€‚
    - **åƒè€ƒ**: `docs/reference-adk-examples.md` (machine-learning-engineering)

- **[ ] 3.4. ä»£ç†å¯è§€æ¸¬æ€§**:
    - **ä»»å‹™**: å»ºç«‹ä¸€å€‹å®Œå–„çš„ LLM å¯è§€æ¸¬æ€§å„€è¡¨æ¿ï¼Œç”¨æ–¼è¿½è¹¤ä»£ç†çš„æ±ºç­–éç¨‹ã€æˆæœ¬å’Œæ€§èƒ½ã€‚
    - **åƒè€ƒ**: `docs/reference-adk-examples.md` (callbacks)
